var ta=Object.defineProperty;var Pt=v=>{throw TypeError(v)};var aa=(v,a,c)=>a in v?ta(v,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):v[a]=c;var gt=(v,a,c)=>aa(v,typeof a!="symbol"?a+"":a,c),ra=(v,a,c)=>a.has(v)||Pt("Cannot "+c);var ht=(v,a,c)=>(ra(v,a,"read from private field"),c?c.call(v):a.get(v)),At=(v,a,c)=>a.has(v)?Pt("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(v):a.set(v,c);import"../chunks/CWj6FrbW.js";import{h as T,g as e,k as b,ak as sa,p as st,d as p,j as s,r,t as P,a as o,e as it,c as qe,f as B,n as ia,i as n,l as K,s as Y,b as Vt,u as Ft,m as Ne,aC as tt}from"../chunks/DP-BcMQ1.js";import{d as oa,e as le,s as W,c as na}from"../chunks/DS5rcHSR.js";import{p as Te,i as y,r as jt,l as la,s as Et,b as Wt}from"../chunks/CrcHuKx2.js";import{I as da,s as va,e as Re,i as xt}from"../chunks/BhJnL3fA.js";import{f as Bt,b as ca,B as rt,e as Dt,a as we}from"../chunks/Dw4-Sk62.js";import{A as fa,a as pa,b as ua}from"../chunks/BT5j_n3M.js";import{B as ma}from"../chunks/BCUSC-SJ.js";import{C as Ot}from"../chunks/DLNyiDlm.js";import{c as Nt}from"../chunks/DdC7HWol.js";import{s as Ut}from"../chunks/BWx_x_V2.js";import{a as ga,c as ha,d as _a,b as _t,m as xa}from"../chunks/qgAFKjXL.js";import{F as ba,S as wa,a as ya}from"../chunks/DfSwAtVk.js";import"../chunks/DKoAsFJN.js";import{C as $a}from"../chunks/DnxMfnsY.js";import{C as ka,a as Ca,b as Pa}from"../chunks/CH14Euky.js";import{l as Aa,n as Da,a as Ua,I as Sa,C as Ia,f as Ma,g as za,e as Va}from"../chunks/BAatBmiI.js";import{X as Fa}from"../chunks/DBUbm6yN.js";import{U as Tt}from"../chunks/CAUmrjWQ.js";import{C as St}from"../chunks/B-8xTyCt.js";import{L as It}from"../chunks/CKAx8NTr.js";import{C as at,a as Mt}from"../chunks/Br5xYnQO.js";import{F as zt}from"../chunks/TZiw9Jiv.js";import{U as ja}from"../chunks/h6LobnOQ.js";const Ea=ha({component:"aspect-ratio",parts:["root"]});var Ge;const wt=class wt{constructor(a){gt(this,"opts");gt(this,"attachment");At(this,Ge,T(()=>({id:this.opts.id.current,style:{position:"absolute",top:0,right:0,bottom:0,left:0},[Ea.root]:"",...this.attachment})));this.opts=a,this.attachment=ga(this.opts.ref)}static create(a){return new wt(a)}get props(){return e(ht(this,Ge))}set props(a){b(ht(this,Ge),a)}};Ge=new WeakMap;let bt=wt;var Wa=p("<div><!></div>"),Ba=p("<div><!></div>");function Oa(v,a){const c=sa();st(a,!0);let k=Te(a,"ref",15,null),f=Te(a,"id",19,()=>_a(c)),j=Te(a,"ratio",3,1),A=jt(a,["$$slots","$$events","$$legacy","ref","id","ratio","children","child"]);const E=bt.create({id:_t.with(()=>f()),ref:_t.with(()=>k(),D=>k(D)),ratio:_t.with(()=>j())}),R=T(()=>xa(A,E.props));var te=Ba();let de;var C=s(te);{var X=D=>{var S=qe(),Q=B(S);Ut(Q,()=>a.child,()=>({props:e(R)})),o(D,S)},ye=D=>{var S=Wa();ca(S,()=>({...e(R)}));var Q=s(S);Ut(Q,()=>a.children??ia),r(S),o(D,S)};y(C,D=>{a.child?D(X):D(ye,!1)})}r(te),P(()=>de=Bt(te,"",de,{position:"relative",width:"100%","padding-bottom":`${j()?100/j():0}%`})),o(v,te),it()}function Na(v,a){const c=la(a,["children","$$slots","$$events","$$legacy"]),k=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];da(v,Et({name:"plus"},()=>c,{get iconNode(){return k},children:(f,j)=>{var A=qe(),E=B(A);va(E,a,"default",{}),o(f,A)},$$slots:{default:!0}}))}function Ta(v,a){st(a,!0);let c=Te(a,"ref",15,null),k=jt(a,["$$slots","$$events","$$legacy","ref"]);var f=qe(),j=B(f);Nt(j,()=>Oa,(A,E)=>{E(A,Et({"data-slot":"aspect-ratio"},()=>k,{get ref(){return c()},set ref(R){c(R)}}))}),o(v,f),it()}var Ra=p('<div class="rounded-xl border border-green-600/20 dark:border-green-500/20 bg-white dark:bg-gray-950/50 p-4 mb-6 relative overflow-hidden shadow-sm dark:shadow-none backdrop-blur-sm"><div class="flex items-center gap-4 relative z-10"><div class="relative flex-shrink-0"><div class="absolute inset-0 bg-green-400/20 dark:bg-green-500/30 blur-2xl rounded-full scale-150"></div> <!></div> <div class="flex-1 text-left"><h2 class="text-lg font-semibold dark:text-white mb-1"><span class="text-green-700 dark:text-green-400">C2PA Verified</span></h2> <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">This means that this image has not been generated by AI, or over edited. <span class="text-gray-900 dark:text-gray-200 font-medium">Human created content only.</span></p></div></div></div>');function qa(v){var a=Ra(),c=s(a),k=s(c),f=n(s(k),2);ba(f,{class:"w-12 h-12 text-green-600 dark:text-green-400 relative",strokeWidth:1}),r(k),K(2),r(c),r(a),o(v,a)}function Ga(v,a){var c;(c=v.target.files)!=null&&c.length&&a(v.target.files)}var Ha=p('<!> <span class="sr-only">Close</span>',1),Ja=p("<!> <!>",1),La=(v,a)=>v.key==="Enter"&&a(),Ka=p('<div class="rounded-md bg-destructive/10 p-4 text-sm text-destructive flex items-center gap-2 animate-in fade-in"><!> </div>'),Xa=(v,a,c)=>b(a,e(c),!0),Ya=(v,a,c)=>v.key==="Enter"&&b(a,e(c),!0),Qa=p('<div class="absolute inset-0 flex items-center justify-center bg-background/50 backdrop-blur-sm"><!></div>'),Za=p('<div class="absolute top-2 right-2"><div class="bg-destructive text-destructive-foreground p-1.5 rounded-full shadow-sm"><!></div></div>'),er=p('<div class="bg-green-500 text-white p-1.5 rounded-full shadow-sm"><!></div>'),tr=p('<div class="bg-emerald-500 text-white p-1.5 rounded-full shadow-sm" title="Capture provenance found and active manifest validates, but capture-manifest validation is unknown in this viewer"><!></div>'),ar=p('<div class="bg-blue-500 text-white p-1.5 rounded-full shadow-sm" title="Signed by software (no capture-signed provenance found)"><!></div>'),rr=p('<div class="bg-amber-500 text-white p-1.5 rounded-full shadow-sm" title="No verified C2PA signature"><!></div>'),sr=p('<div class="absolute top-2 right-2"><!></div>'),ir=p(`<div role="button" tabindex="0"><img class="w-full h-full object-cover"/> <!> <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-3 pt-8
                    opacity-0 group-hover:opacity-100 transition-opacity"><p class="text-white text-xs truncate font-medium"> </p> <p class="text-white/70 text-[10px]"> </p></div></div>`),or=p('<li class="text-sm text-muted-foreground flex items-start gap-2"><span class="mt-1.5 h-1.5 w-1.5 rounded-full bg-primary/50 shrink-0"></span> <span> </span></li>'),nr=p('<details class="group border rounded-lg bg-card text-card-foreground shadow-sm open:ring-1 open:ring-primary/20"><summary class="flex items-center justify-between p-4 cursor-pointer select-none font-medium hover:bg-muted/50 transition-colors rounded-lg group-open:rounded-b-none"><div class="flex items-center gap-3"><!> </div> <!></summary> <div class="p-4 pt-0 border-t bg-muted/10"><ul class="space-y-2 mt-4"></ul></div></details>'),lr=p('<div class="p-4 border rounded-lg bg-muted/20 text-sm text-muted-foreground text-center">No specific edit actions found in the manifest.</div>'),dr=p('<div class="mt-8 space-y-4 animate-in fade-in slide-in-from-top-2 bg-muted/30 p-4 rounded-lg"><h3 class="text-lg font-semibold flex items-center gap-2"><!> </h3> <div class="space-y-2"><!> <!></div></div>'),vr=p('<span class="flex items-center gap-1.5"><!> </span>'),cr=p('<span class="flex items-center gap-1.5"><!> </span>'),fr=p('<span class="flex items-center gap-1.5"><!> </span>'),pr=p('<p class="text-xs text-muted-foreground pr-8">“Verified Capture” requires a capture-origin record <em>and</em> validated signatures. “Capture (Unverified)” means capture provenance is present but this viewer can’t confirm capture-manifest validation separately.</p>'),ur=p("<!> Uploading...",1),mr=p('<div class="grid grid-cols-2 md:grid-cols-4 gap-4 animate-in fade-in slide-in-from-bottom-4"></div> <!> <div class="flex items-center justify-between pt-6 border-t"><div class="flex-1 space-y-1.5"><div class="flex gap-4 text-sm font-medium flex-wrap"><span class="flex items-center gap-1.5"><!> </span> <!> <!> <!></div> <!></div> <!></div>',1),gr=p('<div role="button" tabindex="0"><input type="file" accept="image/*" multiple class="hidden"/> <div class="flex flex-col items-center gap-4 text-center p-4"><div class="p-3 rounded-full bg-muted"><!></div> <div class="space-y-1"><p class="text-sm font-medium">Drag & drop or click to upload multiple images</p> <p class="text-xs text-muted-foreground">Supports JPEG, PNG, WebP</p></div></div></div> <!> <!>',1),hr=p('<div class="absolute top-4 right-4 z-10"><!></div> <div class="overflow-y-auto flex-1 p-1"><!> <!></div>',1),_r=p('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4"><!></div>');function xr(v,a){st(a,!0);let c=Te(a,"open",15,!1),k=Y(!1),f=Y(Vt([])),j=Y(null),A=Y(null),E=Y(null),R=Y(!1);const te=t=>!!(t!=null&&t.c2pa),de=t=>{var l;return!!((l=t==null?void 0:t.c2pa)!=null&&l.hasManifest)},C=t=>{var l;return de(t)&&((l=t.c2pa)==null?void 0:l.activeSignatureValidated)===!0},X=t=>{var l;return((l=t.c2pa)==null?void 0:l.hasCaptureProvenance)===!0},ye=t=>{var l;return(l=t.c2pa)==null?void 0:l.captureSignatureValidated},D=t=>C(t)&&X(t)&&ye(t)===!0,S=t=>C(t)&&X(t)&&ye(t)==null,Q=t=>C(t)&&!X(t),He=t=>{var l;return!de(t)||((l=t.c2pa)==null?void 0:l.activeSignatureValidated)!==!0},ot=t=>{var l;return D(t)&&((l=t.c2pa)==null?void 0:l.activeIsCapture)===!1};let Z=T(()=>e(f).filter(D).length),ve=T(()=>e(f).filter(S).length),$e=T(()=>e(f).filter(Q).length),ce=T(()=>e(f).filter(He).length);Ft(()=>{a.supabase.auth.getSession().then(({data:t})=>{console.log("Current Session:",t.session)})});function Me(t){return new Promise((l,I)=>{const w=new Image;w.onload=()=>l({width:w.naturalWidth,height:w.naturalHeight}),w.onerror=I,w.src=t})}async function Je(){var w,_;if(e(R)||e(Z)===0)return;const{data:{session:t}}=await a.supabase.auth.getSession();if(!t){b(A,"You must be logged in to upload photos.");return}b(R,!0),b(A,null);const l=e(f).filter(D);let I=0;for(const u of l)try{u.processing=!0;const{width:O,height:J}=await Me(u.previewUrl),i=Va((w=u.c2pa)==null?void 0:w.data),x={width:O,height:J,title:u.file.name,description:"Uploaded via Web Interface",c2pa_manifest:(_=u.c2pa)==null?void 0:_.data,c2pa_verified:D(u),...i},m=new FormData;m.append("file",u.file),m.append("metadata",JSON.stringify(x));const{data:h,error:M}=await a.supabase.functions.invoke("photo-upload",{body:m});if(M)throw M;I++}catch(O){console.error("Upload failed for",u.file.name,O),u.error="Upload failed"}finally{u.processing=!1}b(R,!1),I===l.length?(b(f,e(f).filter(u=>!D(u)||u.error),!0),e(f).length===0&&Le()):b(A,`Successfully uploaded ${I} of ${l.length} images. Check errors.`)}async function ke(t){if(c(!0),!t||t.length===0)return;if(b(A,null),t.length>10){b(A,"Please select 10 or fewer images at a time.");return}const l=new Set(e(f).map(_=>`${_.file.name}|${_.file.size}|${_.file.lastModified}`)),I=Array.from(t).filter(_=>{if(!_.type.startsWith("image/"))return!1;const u=`${_.name}|${_.size}|${_.lastModified}`;return l.has(u)?!1:(l.add(u),!0)});if(t.length>0&&I.length===0){b(A,"All selected images are already in the list or are not valid image types.");return}if(I.length===0)return;const w=I.map(_=>({id:Math.random().toString(36).substring(7),file:_,previewUrl:URL.createObjectURL(_),processing:!0,c2pa:null,error:null}));b(f,[...e(f),...w],!0);for(const _ of w)await ze(_)}async function ze(t){var l;try{const w=await(await Aa()).reader.fromBlob(t.file.type,t.file);let _=null,u={hasManifest:!1};if(w){const J=await w.manifestStore(),i=Da(J);u=Ua(i)||{hasManifest:!1},u.hasManifest&&(_=J,console.group(`C2PA Analysis: ${t.file.name}`),console.log("Analysis Result:",u),console.log("Manifest Store (Raw):",J),console.log("Active Manifest ID:",i.active_manifest),console.log("Active Manifest Data:",(l=i.manifests)==null?void 0:l[i.active_manifest]),console.groupEnd())}const O=e(f).findIndex(J=>J.id===t.id);O!==-1&&(e(f)[O].c2pa={...u,data:_},e(f)[O].processing=!1)}catch(I){console.error("Error processing image:",I);const w=e(f).findIndex(_=>_.id===t.id);w!==-1&&(e(f)[w].error="Failed to process",e(f)[w].processing=!1)}}function nt(t){var l;t.preventDefault(),t.stopPropagation(),b(k,!1),(l=t.dataTransfer.files)!=null&&l.length&&ke(t.dataTransfer.files)}function Ve(t){t.preventDefault(),b(k,!0)}function lt(){b(k,!1)}function Ce(){var t;(t=e(j))==null||t.click()}function Le(){c(!1)}var Fe=qe(),Ke=B(Fe);{var Xe=t=>{var l=_r(),I=s(l);Ot(I,{class:"w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col relative shadow-xl",children:(w,_)=>{var u=hr(),O=B(u),J=s(O);rt(J,{variant:"ghost",size:"icon",class:"h-8 w-8 rounded-full",onclick:Le,children:(h,M)=>{var q=Ha(),z=B(q);Fa(z,{class:"h-4 w-4"}),K(2),o(h,q)},$$slots:{default:!0}}),r(O);var i=n(O,2),x=s(i);ka(x,{children:(h,M)=>{var q=Ja(),z=B(q);Ca(z,{children:(pe,ue)=>{K();var ae=Ne("Add Photos");o(pe,ae)},$$slots:{default:!0}});var fe=n(z,2);Pa(fe,{class:"mb-3",children:(pe,ue)=>{K();var ae=Ne("Upload images to verify their C2PA metadata locally in your browser.");o(pe,ae)},$$slots:{default:!0}}),o(h,q)},$$slots:{default:!0}});var m=n(x,2);$a(m,{class:"space-y-6",children:(h,M)=>{var q=gr(),z=B(q);z.__click=Ce,z.__keydown=[La,Ce];var fe=s(z);fe.__change=[Ga,ke],Wt(fe,ee=>b(j,ee),()=>e(j));var pe=n(fe,2),ue=s(pe),ae=s(ue);Tt(ae,{class:"h-6 w-6 text-muted-foreground"}),r(ue),K(2),r(pe),r(z);var Ye=n(z,2);{var me=ee=>{var Pe=Ka(),Ae=s(Pe);St(Ae,{class:"h-4 w-4"});var Qe=n(Ae);r(Pe),P(()=>W(Qe,` ${e(A)??""}`)),o(ee,Pe)};y(Ye,ee=>{e(A)&&ee(me)})}var je=n(Ye,2);{var Rt=ee=>{var Pe=mr(),Ae=B(Pe);Re(Ae,21,()=>e(f),g=>g.id,(g,d)=>{var $=ir();$.__click=[Xa,E,d],$.__keydown=[Ya,E,d];var V=s($),ge=n(V,2);{var Ee=U=>{var F=Qa(),he=s(F);It(he,{class:"h-8 w-8 animate-spin text-primary"}),r(F),o(U,F)},De=(U,F)=>{{var he=re=>{var _e=Za(),se=s(_e),ie=s(se);St(ie,{class:"h-5 w-5"}),r(se),r(_e),P(()=>we(se,"title",e(d).error)),o(re,_e)},Ze=(re,_e)=>{{var se=ie=>{var xe=sr(),Ue=s(xe);{var Be=oe=>{var ne=er(),ft=s(ne);at(ft,{class:"h-5 w-5"}),r(ne),P(pt=>we(ne,"title",pt),[()=>ot(e(d))?"Verified (edited, but traceable to capture-signed origin)":"Verified Capture (device/camera signed)"]),o(oe,ne)},et=(oe,ne)=>{{var ft=Se=>{var Oe=tr(),ut=s(Oe);at(ut,{class:"h-5 w-5"}),r(Oe),o(Se,Oe)},pt=(Se,Oe)=>{{var ut=Ie=>{var be=ar(),mt=s(be);zt(mt,{class:"h-5 w-5"}),r(be),o(Ie,be)},ea=Ie=>{var be=rr(),mt=s(be);Mt(mt,{class:"h-5 w-5"}),r(be),o(Ie,be)};y(Se,Ie=>{Q(e(d))?Ie(ut):Ie(ea,!1)},Oe)}};y(oe,Se=>{S(e(d))?Se(ft):Se(pt,!1)},ne)}};y(Ue,oe=>{D(e(d))?oe(Be):oe(et,!1)})}r(xe),o(ie,xe)};y(re,ie=>{te(e(d))&&ie(se)},_e)}};y(U,re=>{e(d).error?re(he):re(Ze,!1)},F)}};y(ge,U=>{e(d).processing?U(Ee):U(De,!1)})}var G=n(ge,2),L=s(G),We=s(L,!0);r(L);var N=n(L,2),H=s(N);r(N),r(G),r($),P(U=>{var F;Dt($,1,`relative aspect-square rounded-lg overflow-hidden border bg-muted/30 group cursor-pointer transition-all
                  ${((F=e(E))==null?void 0:F.id)===e(d).id?"ring-2 ring-primary ring-offset-2":"hover:border-primary/50"}`),we(V,"src",e(d).previewUrl),we(V,"alt",e(d).file.name),W(We,e(d).file.name),W(H,`${U??""} KB`)},[()=>(e(d).file.size/1024).toFixed(0)]),o(g,$)}),r(Ae);var Qe=n(Ae,2);{var qt=g=>{var d=dr();const $=T(()=>(()=>{const N={};for(const H of e(E).c2pa.actions||[]){const U=za(H.action),F=U.label;N[F]||(N[F]={category:U,actions:[]}),N[F].actions.push(H)}return Object.values(N).sort((H,U)=>H.category.order-U.category.order)})());var V=s(d),ge=s(V);Sa(ge,{class:"h-5 w-5"});var Ee=n(ge);r(V);var De=n(V,2),G=s(De);Re(G,17,()=>e($),xt,(N,H)=>{var U=nr(),F=s(U),he=s(F),Ze=s(he);Nt(Ze,()=>e(H).category.icon,(xe,Ue)=>{Ue(xe,{class:"h-5 w-5 text-primary"})});var re=n(Ze);r(he);var _e=n(he,2);Ia(_e,{class:"h-4 w-4 text-muted-foreground transition-transform duration-200 group-open:rotate-180"}),r(F);var se=n(F,2),ie=s(se);Re(ie,21,()=>e(H).actions,xt,(xe,Ue)=>{var Be=or(),et=n(s(Be),2),oe=s(et,!0);r(et),r(Be),P(ne=>W(oe,ne),[()=>Ma(e(Ue))||e(Ue).action]),o(xe,Be)}),r(ie),r(se),r(U),P(()=>W(re,` ${e(H).category.label??""}`)),o(N,U)});var L=n(G,2);{var We=N=>{var H=lr();o(N,H)};y(L,N=>{e($).length===0&&N(We)})}r(De),r(d),P(()=>W(Ee,` Edits for ${e(E).file.name??""}`)),o(g,d)};y(Qe,g=>{var d;e(E)&&((d=e(E).c2pa)!=null&&d.hasManifest)&&g(qt)})}var yt=n(Qe,2),dt=s(yt),vt=s(dt),ct=s(vt),$t=s(ct);at($t,{class:"h-4 w-4 text-green-500"});var Gt=n($t);r(ct);var kt=n(ct,2);{var Ht=g=>{var d=vr(),$=s(d);at($,{class:"h-4 w-4 text-emerald-500"});var V=n($);r(d),P(()=>W(V,` ${e(ve)??""} Capture (Unverified)`)),o(g,d)};y(kt,g=>{e(ve)>0&&g(Ht)})}var Ct=n(kt,2);{var Jt=g=>{var d=cr(),$=s(d);zt($,{class:"h-4 w-4 text-blue-500"});var V=n($);r(d),P(()=>W(V,` ${e($e)??""} Signed by Software`)),o(g,d)};y(Ct,g=>{e($e)>0&&g(Jt)})}var Lt=n(Ct,2);{var Kt=g=>{var d=fr(),$=s(d);Mt($,{class:"h-4 w-4 text-amber-500"});var V=n($);r(d),P(()=>W(V,` ${e(ce)??""} Unsigned / Not Verified`)),o(g,d)};y(Lt,g=>{e(ce)>0&&g(Kt)})}r(vt);var Xt=n(vt,2);{var Yt=g=>{var d=pr();o(g,d)};y(Xt,g=>{(e(ce)>0||e($e)>0||e(ve)>0)&&g(Yt)})}r(dt);var Qt=n(dt,2);{var Zt=g=>{rt(g,{onclick:Je,get disabled(){return e(R)},children:(d,$)=>{var V=qe(),ge=B(V);{var Ee=G=>{var L=ur(),We=B(L);It(We,{class:"mr-2 h-4 w-4 animate-spin"}),K(),o(G,L)},De=G=>{var L=Ne();P(()=>W(L,`Upload ${e(Z)??""} Verified ${e(Z)===1?"Image":"Images"}`)),o(G,L)};y(ge,G=>{e(R)?G(Ee):G(De,!1)})}o(d,V)},$$slots:{default:!0}})};y(Qt,g=>{e(Z)>0&&g(Zt)})}r(yt),P(()=>W(Gt,` ${e(Z)??""} Verified Capture`)),o(ee,Pe)};y(je,ee=>{e(f).length>0&&ee(Rt)})}P(()=>Dt(z,1,`relative flex flex-col items-center justify-center w-full h-48 rounded-xl border-2 border-dashed transition-colors cursor-pointer outline-none
            ${e(k)?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50 hover:bg-muted/50"}`)),le("dragover",z,Ve),le("dragleave",z,lt),le("drop",z,nt),o(h,q)},$$slots:{default:!0}}),r(i),o(w,u)},$$slots:{default:!0}}),r(l),o(t,l)};y(Ke,t=>{c()&&t(Xe)})}return o(v,Fe),it({processFiles:ke})}oa(["click","keydown","change"]);var br=p('<div class="fixed inset-0 z-[1000] flex items-center justify-center bg-background/20 backdrop-blur-sm pointer-events-none svelte-19x1v7i"><div class="bg-background/40 backdrop-blur-xl border-2 border-dashed border-primary/50 p-12 rounded-3xl shadow-2xl flex flex-col items-center gap-4 animate-in zoom-in-95 duration-200 ring-1 ring-white/10 svelte-19x1v7i"><div class="p-5 rounded-full bg-primary/10 shadow-inner svelte-19x1v7i"><!></div> <div class="space-y-1 text-center svelte-19x1v7i"><p class="text-3xl font-bold text-primary tracking-tight svelte-19x1v7i">Drop to Add Photos</p> <p class="text-muted-foreground font-medium svelte-19x1v7i">Import and verify your images instantly</p></div></div></div>'),wr=p("<!> <!>",1),yr=p('<!> <img class="h-full w-full object-cover rounded-sm transition-opacity duration-300 svelte-19x1v7i"/>',1),$r=p('<a class="group svelte-19x1v7i"><!></a>'),kr=p('<span class="flex items-center svelte-19x1v7i"><!> <span class="max-w-0 overflow-hidden whitespace-nowrap transition-all duration-300 ease-out group-hover:max-w-[6rem] init-expand-text svelte-19x1v7i">Add Images</span></span> <span class="sr-only svelte-19x1v7i">Add Images</span>',1),Cr=p('<!> <div class="bg-background text-foreground min-h-screen svelte-19x1v7i"><div class="relative svelte-19x1v7i"><main class="relative z-10 container mx-auto max-w-screen-lg px-4 sm:pt-20 pt-8 pb-8 svelte-19x1v7i"><div class="relative z-10 mb-8 svelte-19x1v7i"><div class="flex flex-row items-start gap-4 svelte-19x1v7i"><!> <div class="flex-grow min-w-0 svelte-19x1v7i"><h1 class="text-xl font-bold tracking-tight leading-tight sm:text-3xl svelte-19x1v7i"> </h1> <p class="text-muted-foreground text-sm sm:text-base svelte-19x1v7i"> </p> <p class="mt-2 max-w-xl text-balance text-sm sm:text-base svelte-19x1v7i"> </p> <div class="mt-3 flex flex-wrap gap-2 svelte-19x1v7i"></div></div></div> <div class="mt-4 flex gap-2 md:absolute md:top-0 md:right-0 md:mt-0 svelte-19x1v7i"><!> <!></div></div> <!> <div class="grid grid-cols-2 gap-2 sm:grid-cols-3 md:gap-4 svelte-19x1v7i"></div></main></div> <!></div> <!>',1);function Yr(v,a){st(a,!0);let c=Y(!1),k=Y(null),f=Y(!1),j=0;function A(i){var x,m,h;i.preventDefault(),b(f,!1),j=0,(m=(x=i.dataTransfer)==null?void 0:x.files)!=null&&m.length&&((h=e(k))==null||h.processFiles(i.dataTransfer.files))}function E(i){i.preventDefault()}function R(i){var x,m;i.preventDefault(),j++,((m=(x=i.dataTransfer)==null?void 0:x.items)==null?void 0:m.length)>0&&b(f,!0)}function te(i){i.preventDefault(),j--,j===0&&b(f,!1)}function de(i){i&&typeof i.preventDefault=="function"&&i.preventDefault(),console.log("Add Photos clicked, opening dialog..."),b(c,!0)}let C=T(()=>a.data.profile),X=T(()=>a.data.photos),ye=T(()=>a.data.canEdit),D=T(()=>e(C).interests.map(i=>i.interest)),S=Y(Vt(Array(e(X).length).fill(!1)));Ft(()=>{e(X).length!==e(S).length&&b(S,Array(e(X).length).fill(!1),!0)});var Q=Cr();le("drop",tt,A),le("dragover",tt,E),le("dragenter",tt,R),le("dragleave",tt,te);var He=B(Q);{var ot=i=>{var x=br(),m=s(x),h=s(m),M=s(h);Tt(M,{class:"h-12 w-12 text-primary animate-pulse"}),r(h),K(2),r(m),r(x),o(i,x)};y(He,i=>{e(f)&&i(ot)})}var Z=n(He,2),ve=s(Z),$e=s(ve),ce=s($e),Me=s(ce),Je=s(Me);fa(Je,{class:"h-20 w-20 shrink-0 md:h-32 md:w-32",children:(i,x)=>{var m=wr(),h=B(m);pa(h,{get src(){return e(C).avatar_url},get alt(){return e(C).display_name}});var M=n(h,2);ua(M,{children:(q,z)=>{ja(q,{class:"h-12 w-12"})},$$slots:{default:!0}}),o(i,m)},$$slots:{default:!0}});var ke=n(Je,2),ze=s(ke),nt=s(ze,!0);r(ze);var Ve=n(ze,2),lt=s(Ve);r(Ve);var Ce=n(Ve,2),Le=s(Ce,!0);r(Ce);var Fe=n(Ce,2);Re(Fe,21,()=>e(D),xt,(i,x)=>{ma(i,{variant:"secondary",children:(m,h)=>{K();var M=Ne();P(()=>W(M,e(x))),o(m,M)},$$slots:{default:!0}})}),r(Fe),r(ke),r(Me);var Ke=n(Me,2),Xe=s(Ke);const t=T(()=>e(C).display_name||e(C).username),l=T(()=>e(C).bio||`Check out ${e(C).display_name}'s profile on Proof in Bio`);wa(Xe,{get title(){return e(t)},get description(){return e(l)},label:"Share Profile",class:"flex-1 md:flex-none"});var I=n(Xe,2);{var w=i=>{rt(i,{get href(){return`/${a.data.profile.username??""}/edit`},class:"flex-1 md:flex-none",children:(x,m)=>{K();var h=Ne("Edit Profile");o(x,h)},$$slots:{default:!0}})};y(I,i=>{e(ye)&&i(w)})}r(Ke),r(ce);var _=n(ce,2);qa(_);var u=n(_,2);Re(u,23,()=>e(X),i=>i.id,(i,x,m)=>{var h=$r(),M=s(h);Ot(M,{class:"overflow-hidden border-0 transition-all rounded-sm py-0 duration-200 ease-in-out group-hover:shadow-lg group-hover:-translate-y-1",children:(q,z)=>{Ta(q,{ratio:1,class:"bg-slate-100 dark:bg-slate-800 rounded-sm relative",children:(fe,pe)=>{var ue=yr(),ae=B(ue);{var Ye=je=>{ya(je,{class:"h-full w-full absolute"})};y(ae,je=>{e(S)[e(m)]||je(Ye)})}var me=n(ae,2);P(()=>{we(me,"src",e(x).storage_url),we(me,"alt",e(x).title||"User photo"),Bt(me,`opacity: ${e(S)[e(m)]?1:0};`)}),le("load",me,()=>e(S)[e(m)]=!0),na(me),o(fe,ue)},$$slots:{default:!0}})},$$slots:{default:!0}}),r(h),P(()=>we(h,"href",`/${e(C).username}/${e(x).id}`)),o(i,h)}),r(u),r($e),r(ve);var O=n(ve,2);rt(O,{style:"z-index: 999",class:"group fixed bottom-6 right-6 h-14 min-w-[3.5rem] rounded-full shadow-2xl transition-all duration-300 ease-out hover:pr-6 hover:pl-4 flex items-center justify-center overflow-hidden init-expand-btn",onclick:de,children:(i,x)=>{var m=kr(),h=B(m),M=s(h);Na(M,{class:"h-10 w-10 transition-[margin] duration-300 ease-out group-hover:mr-2 init-expand-icon"}),K(2),r(h),K(2),o(i,m)},$$slots:{default:!0}}),r(Z);var J=n(Z,2);Wt(xr(J,{get supabase(){return a.data.supabase},get open(){return e(c)},set open(i){b(c,i,!0)}}),i=>b(k,i,!0),()=>e(k)),P(()=>{W(nt,e(C).display_name||e(C).username),W(lt,`@${e(C).username??""}`),W(Le,e(C).bio)}),o(v,Q),it()}export{Yr as component};
