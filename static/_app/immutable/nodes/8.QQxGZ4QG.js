import"../chunks/CWj6FrbW.js";import{p as Ce,d as y,a as u,e as Be,h as s,n as Ne,r as i,s as R,b as he,u as ze,t as S,g as r,f as I,i as t,j as Fe,m as z,c as Ge,k as x,l as h}from"../chunks/pWktw37S.js";import{s as F}from"../chunks/DSH6DRO-.js";import{p as Oe,r as We,b as qe,i as ye}from"../chunks/x2hLKNxq.js";import{e as Je,i as Ke}from"../chunks/CqV7ya31.js";import{a as Xe}from"../chunks/CWiAOyhj.js";import{b as Ye,d as He,B as Z,e as we,f as Qe,a as ke,s as Ve,r as U}from"../chunks/Um4EIWL9.js";import{d as Ze,e as $e,r as ea}from"../chunks/Dc3OgW9d.js";import{b as T}from"../chunks/2Ok7ikY7.js";import{A as aa,a as ta,b as ra}from"../chunks/D0aVbJyj.js";import{B as sa}from"../chunks/DRPOvy2M.js";import{C as ia}from"../chunks/PKLICf-u.js";import{s as oa}from"../chunks/DBFbfTei.js";import{e as la}from"../chunks/sN0y10ki.js";import"../chunks/DWrQvQ3Q.js";import{A as na}from"../chunks/zeJ5Uz8e.js";import{U as da}from"../chunks/DuPISISz.js";import{C as fa}from"../chunks/BfYm0cWw.js";import{L as ua}from"../chunks/Dz5Gx38q.js";import{t as Pe}from"../chunks/BsMHhdNX.js";import{X as ca}from"../chunks/Dz3FffbF.js";var ma=y("<div><!></div>");function pa(b,e){Ce(e,!0);let l=Oe(e,"ref",15,null),f=We(e,["$$slots","$$events","$$legacy","ref","class","children"]);var c=ma();Ye(c,_=>({"data-slot":"card-footer",class:_,...f}),[()=>He("[.border-t]:pt-6 flex items-center px-6",e.class)]);var d=s(c);oa(d,()=>e.children??Ne),i(c),qe(c,_=>l(_),()=>l()),u(b,c),Be()}function va(b,e){var f;const l=(f=b.target.files)==null?void 0:f[0];if(l){const c=new FileReader;c.onload=d=>{x(e,d.target.result,!0)},c.readAsDataURL(l)}}function ba(b,e,l,f){["Enter",","," "].includes(b.key)?(b.preventDefault(),e()):b.key==="Backspace"&&t(l)===""&&t(f).length>0&&x(f,t(f).slice(0,-1),!0)}var ga=y("<!> <!>",1),xa=y("<!> ",1),_a=(b,e,l)=>e(t(l)),ha=y(' <button type="button" class="ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2"><!> <span class="sr-only"> </span></button>',1),ya=y("<!> Saving...",1),wa=y('<p class="text-xs text-muted-foreground hidden sm:block">Please save your changes before leaving.</p> <div class="flex gap-4 ml-auto"><!> <!></div>',1),ka=y('<form method="POST" enctype="multipart/form-data"><div class="p-6 md:p-8 space-y-8"><div class="flex flex-col sm:flex-row gap-8 items-start sm:items-center border-b pb-8"><!> <div class="space-y-2 flex-1"><h3 class="font-semibold text-lg">Profile Picture</h3> <p class="text-sm text-muted-foreground">This will be displayed on your public profile.</p> <div class="pt-2 flex items-center gap-4"><input type="file" id="avatar" name="avatar" accept="image/jpeg,image/jpg,image/png,image/webp" class="hidden"/> <!> <p class="text-xs text-muted-foreground">JPG, PNG or WebP. Max 2MB.</p></div></div></div> <div class="grid gap-6 md:grid-cols-2"><div class="space-y-2"><label for="username" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Username</label> <input type="text" id="username" name="username"/> <div class="flex justify-between items-center text-[0.8rem] text-muted-foreground"><span>Your unique profile URL.</span> <span><!></span></div></div> <div class="space-y-2"><label for="display_name" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Display Name</label> <input type="text" id="display_name" name="display_name" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"/></div></div> <div class="space-y-2"><label for="bio" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Bio</label> <textarea id="bio" name="bio" rows="4" class="flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 resize-y"></textarea> <p class="text-[0.8rem] text-muted-foreground">Tell us a little bit about yourself.</p></div> <div class="grid gap-6 md:grid-cols-2"><div class="space-y-2"><label for="website" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Website</label> <input type="url" id="website" name="website" placeholder="https://example.com" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"/></div> <div class="space-y-2"><label for="location" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Location</label> <input type="text" id="location" name="location" placeholder="City, Country" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"/></div></div> <div class="space-y-2"><label for="interests" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Interests</label> <div class="flex min-h-[2.5rem] w-full flex-wrap gap-2 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2"><!> <input type="text" class="flex-1 bg-transparent outline-none placeholder:text-muted-foreground min-w-[120px]"/></div> <input type="hidden" name="interests"/> <p class="text-[0.8rem] text-muted-foreground">Type and press Enter or Space to add interests.</p></div></div> <!></form>'),Pa=y('<div class="min-h-screen bg-muted/30 py-10"><div class="container mx-auto max-w-3xl px-4"><div class="mb-8"><a class="inline-flex items-center text-sm font-medium text-muted-foreground hover:text-primary transition-colors mb-4"><!> Back to Profile</a> <h1 class="text-3xl font-bold tracking-tight text-foreground">Edit Profile</h1> <p class="text-muted-foreground mt-1">Manage your profile settings and public preferences.</p></div> <!></div></div>');function Ka(b,e){var ae,te,re,se,ie,oe;Ce(e,!0);let l=R(he({username:((ae=e.data.profile)==null?void 0:ae.username)||"",display_name:((te=e.data.profile)==null?void 0:te.display_name)||"",bio:((re=e.data.profile)==null?void 0:re.bio)||"",website:((se=e.data.profile)==null?void 0:se.website)||"",location:((ie=e.data.profile)==null?void 0:ie.location)||"",interests:((oe=e.data.interests)==null?void 0:oe.join(", "))||""})),f=R(!1);ze(()=>{var g,D,w,P,C,E;x(l,{username:((g=e.data.profile)==null?void 0:g.username)||"",display_name:((D=e.data.profile)==null?void 0:D.display_name)||"",bio:((w=e.data.profile)==null?void 0:w.bio)||"",website:((P=e.data.profile)==null?void 0:P.website)||"",location:((C=e.data.profile)==null?void 0:C.location)||"",interests:((E=e.data.interests)==null?void 0:E.join(", "))||""},!0),x(d,e.data.interests||[],!0)});let c=R(null),d=R(he(e.data.interests||[])),_=R("");function $(){const g=t(_).trim();g&&!t(d).includes(g)&&(x(d,[...t(d),g],!0),x(_,""))}function je(g){x(d,t(d).filter(D=>D!==g),!0)}var G=Pa(),ee=s(G),O=s(ee),W=s(O),Ae=s(W);na(Ae,{class:"mr-2 h-4 w-4"}),h(),i(W),h(4),i(O);var Ie=r(O,2);ia(Ie,{class:"overflow-hidden border-border/50 shadow-sm py-0",children:(g,D)=>{var w=ka(),P=s(w),C=s(P),E=s(C);aa(E,{class:"h-24 w-24 sm:h-28 sm:w-28 border-4 border-background shadow-sm",children:(a,n)=>{var o=ga(),m=I(o);const p=Fe(()=>{var v;return t(c)||((v=e.data.profile)==null?void 0:v.avatar_url)});ta(m,{get src(){return t(p)},alt:"Profile preview"});var j=r(m,2);ra(j,{children:(v,M)=>{da(v,{class:"h-10 w-10 text-muted-foreground"})},$$slots:{default:!0}}),u(a,o)},$$slots:{default:!0}});var le=r(E,2),ne=r(s(le),4),de=s(ne);de.__change=[va,c];var Ue=r(de,2);Z(Ue,{type:"button",variant:"outline",size:"sm",onclick:()=>document.getElementById("avatar").click(),children:(a,n)=>{var o=xa(),m=I(o);fa(m,{class:"h-4 w-4 mr-2"});var p=r(m);S(()=>F(p,` ${t(c)?"Change Photo":"Upload Photo"}`)),u(a,o)},$$slots:{default:!0}}),h(2),i(ne),i(le),i(C);var q=r(C,2),J=s(q),B=r(s(J),2);U(B);var fe=r(B,2),K=r(s(fe),2),Te=s(K);{var De=a=>{var n=z("Max changes reached");u(a,n)},Ee=a=>{var n=z();S(()=>{var o;return F(n,`${2-(((o=e.data.profile)==null?void 0:o.username_changes)||0)} changes remaining`)}),u(a,n)};ye(Te,a=>{var n;(((n=e.data.profile)==null?void 0:n.username_changes)||0)>=2?a(De):a(Ee,!1)})}i(K),i(fe),i(J);var ue=r(J,2),ce=r(s(ue),2);U(ce),i(ue),i(q);var X=r(q,2),me=r(s(X),2);ea(me),h(2),i(X);var Y=r(X,2),H=s(Y),pe=r(s(H),2);U(pe),i(H);var ve=r(H,2),be=r(s(ve),2);U(be),i(ve),i(Y);var ge=r(Y,2),Q=r(s(ge),2),xe=s(Q);Je(xe,17,()=>t(d),Ke,(a,n)=>{sa(a,{variant:"secondary",class:"gap-1 pr-1",children:(o,m)=>{h();var p=ha(),j=I(p),v=r(j);v.__click=[_a,je,n];var M=s(v);ca(M,{class:"h-3 w-3 text-muted-foreground hover:text-foreground"});var k=r(M,2),V=s(k);i(k),i(v),S(()=>{F(j,`${t(n)??""} `),F(V,`Remove ${t(n)??""}`)}),u(o,p)},$$slots:{default:!0}})});var L=r(xe,2);U(L),L.__keydown=[ba,$,_,d],i(Q);var _e=r(Q,2);U(_e),h(2),i(ge),i(P);var Le=r(P,2);pa(Le,{class:"bg-muted/50 px-6 py-6 flex items-center justify-between border-t",children:(a,n)=>{var o=wa(),m=r(I(o),2),p=s(m);Z(p,{variant:"ghost",get href(){return`/${e.data.profile.username??""}`},children:(v,M)=>{h();var k=z("Cancel");u(v,k)},$$slots:{default:!0}});var j=r(p,2);Z(j,{type:"submit",get disabled(){return t(f)},children:(v,M)=>{var k=Ge(),V=I(k);{var Me=A=>{var N=ya(),Se=I(N);ua(Se,{class:"mr-2 h-4 w-4 animate-spin"}),h(),u(A,N)},Re=A=>{var N=z("Save Changes");u(A,N)};ye(V,A=>{t(f)?A(Me):A(Re,!1)})}u(v,k)},$$slots:{default:!0}}),i(m),u(a,o)},$$slots:{default:!0}}),i(w),Xe(w,(a,n)=>{var o;return(o=la)==null?void 0:o(a,n)},()=>()=>(x(f,!0),async({result:a,update:n})=>{var o;x(f,!1),a.type==="success"?Pe.success("Profile updated successfully!"):a.type==="failure"&&Pe.error(((o=a.data)==null?void 0:o.error)||"Failed to update profile"),await n({reset:!1})})),S(a=>{var n,o,m,p;B.readOnly=(((n=e.data.profile)==null?void 0:n.username_changes)||0)>=2,B.disabled=(((o=e.data.profile)==null?void 0:o.username_changes)||0)>=2,we(B,1,`flex h-10 w-full rounded-md border border-input px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${(((m=e.data.profile)==null?void 0:m.username_changes)||0)>=2?"bg-muted":"bg-background"}`),we(K,1,Qe((((p=e.data.profile)==null?void 0:p.username_changes)||0)>=2?"text-destructive":"")),ke(L,"placeholder",t(d).length===0?"Photography, Travel, Nature":""),Ve(_e,a)},[()=>t(d).join(", ")]),T(B,()=>t(l).username,a=>t(l).username=a),T(ce,()=>t(l).display_name,a=>t(l).display_name=a),T(me,()=>t(l).bio,a=>t(l).bio=a),T(pe,()=>t(l).website,a=>t(l).website=a),T(be,()=>t(l).location,a=>t(l).location=a),$e("blur",L,$),T(L,()=>t(_),a=>x(_,a)),u(g,w)},$$slots:{default:!0}}),i(ee),i(G),S(()=>ke(W,"href",`/${e.data.profile.username??""}`)),u(b,G),Be()}Ze(["change","click","keydown"]);export{Ka as component};
