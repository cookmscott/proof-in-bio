var Ca=Object.defineProperty;var Kt=e=>{throw TypeError(e)};var Sa=(e,t,r)=>t in e?Ca(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Rt=(e,t,r)=>Sa(e,typeof t!="symbol"?t+"":t,r),Aa=(e,t,r)=>t.has(e)||Kt("Cannot "+r);var Ot=(e,t,r)=>(Aa(e,t,"read from private field"),r?r.call(e):t.get(e)),Xt=(e,t,r)=>t.has(e)?Kt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r);import"../chunks/CWj6FrbW.js";import{u as L,i as a,g as y,ai as Ma,p as Nt,b as _,e as f,r as u,k as F,a as v,d as Dt,c as q,f as A,n as Na,s as m,j as ee,h as re,l as Bt,m as Da,t as Se,a_ as St}from"../chunks/C2C4OSbN.js";import{s as W}from"../chunks/CaX8zT8B.js";import{p as dt,i as k,r as ma,l as xe,s as ge,b as ga}from"../chunks/DMomQ0_j.js";import{I as be,s as $e,e as _t,i as Gt}from"../chunks/DHZx8vpx.js";import{g as ha,b as Ua,B as Oe,e as Ht,s as Ae}from"../chunks/TSTVjuax.js";import{d as _a,e as Ve,f as Ia}from"../chunks/DokP9ubG.js";import{i as Qt}from"../chunks/CxH-x5dN.js";import{b as za,a as Fa,A as Ta}from"../chunks/ji_QvPLU.js";import{B as ja}from"../chunks/DCKd2EUB.js";import{C as xa}from"../chunks/BgpECmlh.js";import{c as ba}from"../chunks/U4ZWPL4m.js";import{s as Zt}from"../chunks/CMFJKJ6Y.js";import{a as Ea,c as Ra,d as Oa,b as Vt,m as Va}from"../chunks/BGCKW5zI.js";import{P as ea,S as Wa,a as La,C as Ba}from"../chunks/BKbK2HCV.js";import"../chunks/BmSKAjrN.js";import{F as Ga}from"../chunks/gDHfcLou.js";import{C as Ha}from"../chunks/DE5p0xUg.js";import{C as qa,a as Ja,b as Ya}from"../chunks/C6e9y6Ea.js";import{S as Ka,a as $a,C as At,b as ta}from"../chunks/CM4ZHZKP.js";import{X as Xa}from"../chunks/DhNkNsbp.js";import{U as qt}from"../chunks/BuLJfycD.js";import{C as aa}from"../chunks/B0mtjVV3.js";import{L as ra}from"../chunks/BI3CT5mP.js";import{F as ia}from"../chunks/DXIZxz3_.js";import{U as Qa}from"../chunks/CE9x3AHL.js";import{t as Wt}from"../chunks/DihSmMN3.js";const Za=Ra({component:"aspect-ratio",parts:["root"]});var xt;const Yt=class Yt{constructor(t){Rt(this,"opts");Rt(this,"attachment");Xt(this,xt,L(()=>({id:this.opts.id.current,style:{position:"absolute",top:0,right:0,bottom:0,left:0},[Za.root]:"",...this.attachment})));this.opts=t,this.attachment=Ea(this.opts.ref)}static create(t){return new Yt(t)}get props(){return a(Ot(this,xt))}set props(t){y(Ot(this,xt),t)}};xt=new WeakMap;let Jt=Yt;var er=_("<div><!></div>"),tr=_("<div><!></div>");function ar(e,t){const r=Ma();Nt(t,!0);let i=dt(t,"ref",15,null),o=dt(t,"id",19,()=>Oa(r)),n=dt(t,"ratio",3,1),c=ma(t,["$$slots","$$events","$$legacy","ref","id","ratio","children","child"]);const s=Jt.create({id:Vt.with(()=>o()),ref:Vt.with(()=>i(),E=>i(E)),ratio:Vt.with(()=>n())}),g=L(()=>Va(c,s.props));var x=tr();let T;var X=f(x);{var M=E=>{var V=q(),Q=A(V);Zt(Q,()=>t.child,()=>({props:a(g)})),v(E,V)},ce=E=>{var V=er();Ua(V,()=>({...a(g)}));var Q=f(V);Zt(Q,()=>t.children??Na),u(V),v(E,V)};k(X,E=>{t.child?E(M):E(ce,!1)})}u(x),F(()=>T=ha(x,"",T,{position:"relative",width:"100%","padding-bottom":`${n()?100/n():0}%`})),v(e,x),Dt()}function rr(e,t){const r=xe(t,["children","$$slots","$$events","$$legacy"]),i=[["path",{d:"m6 9 6 6 6-6"}]];be(e,ge({name:"chevron-down"},()=>r,{get iconNode(){return i},children:(o,n)=>{var c=q(),s=A(c);$e(s,t,"default",{}),v(o,c)},$$slots:{default:!0}}))}function na(e,t){const r=xe(t,["children","$$slots","$$events","$$legacy"]),i=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 12h8"}],["path",{d:"M12 8v8"}]];be(e,ge({name:"circle-plus"},()=>r,{get iconNode(){return i},children:(o,n)=>{var c=q(),s=A(c);$e(s,t,"default",{}),v(o,c)},$$slots:{default:!0}}))}function ya(e,t){const r=xe(t,["children","$$slots","$$events","$$legacy"]),i=[["path",{d:"m16 18 6-6-6-6"}],["path",{d:"m8 6-6 6 6 6"}]];be(e,ge({name:"code"},()=>r,{get iconNode(){return i},children:(o,n)=>{var c=q(),s=A(c);$e(s,t,"default",{}),v(o,c)},$$slots:{default:!0}}))}function ir(e,t){const r=xe(t,["children","$$slots","$$events","$$legacy"]),i=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]];be(e,ge({name:"image"},()=>r,{get iconNode(){return i},children:(o,n)=>{var c=q(),s=A(c);$e(s,t,"default",{}),v(o,c)},$$slots:{default:!0}}))}function sa(e,t){const r=xe(t,["children","$$slots","$$events","$$legacy"]),i=[["path",{d:"M11 12H3"}],["path",{d:"M16 6H3"}],["path",{d:"M16 18H3"}],["path",{d:"M21 12h-6"}]];be(e,ge({name:"list-minus"},()=>r,{get iconNode(){return i},children:(o,n)=>{var c=q(),s=A(c);$e(s,t,"default",{}),v(o,c)},$$slots:{default:!0}}))}function Lt(e,t){const r=xe(t,["children","$$slots","$$events","$$legacy"]),i=[["path",{d:"M11 19H5v-6"}],["path",{d:"M13 5h6v6"}],["path",{d:"M19 5 5 19"}]];be(e,ge({name:"move-diagonal"},()=>r,{get iconNode(){return i},children:(o,n)=>{var c=q(),s=A(c);$e(s,t,"default",{}),v(o,c)},$$slots:{default:!0}}))}function oa(e,t){const r=xe(t,["children","$$slots","$$events","$$legacy"]),i=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];be(e,ge({name:"plus"},()=>r,{get iconNode(){return i},children:(o,n)=>{var c=q(),s=A(c);$e(s,t,"default",{}),v(o,c)},$$slots:{default:!0}}))}function nr(e,t){const r=xe(t,["children","$$slots","$$events","$$legacy"]),i=[["path",{d:"M4 11a9 9 0 0 1 9 9"}],["path",{d:"M4 4a16 16 0 0 1 16 16"}],["circle",{cx:"5",cy:"19",r:"1"}]];be(e,ge({name:"rss"},()=>r,{get iconNode(){return i},children:(o,n)=>{var c=q(),s=A(c);$e(s,t,"default",{}),v(o,c)},$$slots:{default:!0}}))}function sr(e,t){const r=xe(t,["children","$$slots","$$events","$$legacy"]),i=[["path",{d:"M14 17H5"}],["path",{d:"M19 7h-9"}],["circle",{cx:"17",cy:"17",r:"3"}],["circle",{cx:"7",cy:"7",r:"3"}]];be(e,ge({name:"settings-2"},()=>r,{get iconNode(){return i},children:(o,n)=>{var c=q(),s=A(c);$e(s,t,"default",{}),v(o,c)},$$slots:{default:!0}}))}function la(e,t){const r=xe(t,["children","$$slots","$$events","$$legacy"]),i=[["path",{d:"M4 10c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2"}],["path",{d:"M10 16c-1.1 0-2-.9-2-2v-4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2"}],["rect",{width:"8",height:"8",x:"14",y:"14",rx:"2"}]];be(e,ge({name:"square-stack"},()=>r,{get iconNode(){return i},children:(o,n)=>{var c=q(),s=A(c);$e(s,t,"default",{}),v(o,c)},$$slots:{default:!0}}))}function or(e,t){Nt(t,!0);let r=dt(t,"ref",15,null),i=ma(t,["$$slots","$$events","$$legacy","ref"]);var o=q(),n=A(o);ba(n,()=>ar,(c,s)=>{s(c,ge({"data-slot":"aspect-ratio"},()=>i,{get ref(){return r()},set ref(g){r(g)}}))}),v(e,o),Dt()}var lr=_('<div class="rounded-xl border border-green-600/20 dark:border-green-500/20 bg-white dark:bg-gray-950/50 p-4 mb-6 relative overflow-hidden shadow-sm dark:shadow-none backdrop-blur-sm"><div class="flex items-center gap-4 relative z-10"><div class="relative flex-shrink-0"><div class="absolute inset-0 bg-green-400/20 dark:bg-green-500/30 blur-2xl rounded-full scale-150"></div> <!></div> <div class="flex-1 text-left"><h2 class="text-lg font-semibold dark:text-white mb-1"><span class="text-green-700 dark:text-green-400">C2PA Verified</span></h2> <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">This means that this image has not been generated by AI, or over edited. <span class="text-gray-900 dark:text-gray-200 font-medium">Human created content only.</span></p></div></div></div>');function dr(e){var t=lr(),r=f(t),i=f(r),o=m(f(i),2);Ga(o,{class:"w-12 h-12 text-green-600 dark:text-green-400 relative",strokeWidth:1}),u(i),ee(2),u(r),u(t),v(e,t)}const da="0.5.6";let Mt=null;const cr={"c2pa.created":{order:1,label:"Creation & Ingestion",icon:na},"c2pa.opened":{order:1,label:"Creation & Ingestion",icon:na},"c2pa.placed":{order:2,label:"Editorial Content Changes",icon:ea},"c2pa.edited":{order:2,label:"Editorial Content Changes",icon:ea},"c2pa.color_adjustments":{order:3,label:"Color & Tone Adjustments",icon:sr},"c2pa.filtered":{order:4,label:"Enhancement (Non-Editorial)",icon:$a},"c2pa.metadata":{order:7,label:"Metadata-Only Changes",icon:ya},"c2pa.cropped":{order:8,label:"Resizing & Scaling",icon:Lt},"c2pa.resized":{order:8,label:"Resizing & Scaling",icon:Lt},"c2pa.orientation":{order:8,label:"Resizing & Scaling",icon:Lt},"c2pa.converted":{order:9,label:"File / Format Transformations",icon:la},"c2pa.transcoded":{order:9,label:"File / Format Transformations",icon:la},"c2pa.published":{order:10,label:"Publishing & Distribution",icon:nr},"c2pa.redacted":{order:11,label:"Removal & Redaction",icon:sa},"c2pa.removed":{order:11,label:"Removal & Redaction",icon:sa},"c2pa.watermarked":{order:12,label:"Watermarking",icon:Ka}};function wa(e){var r,i;if(!e)return!1;const t=e.digitalSourceType||((r=e.parameters)==null?void 0:r.digitalSourceType)||((i=e.parameters)==null?void 0:i["http://cv.iptc.org/newscodes/digitalsourcetype/"]);if(t){const o=String(t);if(o.includes("trainedAlgorithmicData")||o.includes("compositeWithTrainedAlgorithmicMedia"))return!0}return!1}function ur(e){return cr[e]||{order:99,label:"Other Actions",icon:ya}}function vr(e){const t=e.parameters;if(!t)return null;if(t["com.adobe.acr"]){const i=t["com.adobe.acr"],o=t["com.adobe.acr.value"];return o?`${i}: ${o}`:i}if(t.ingredients)return`Imported ${t.ingredients.length} asset(s)`;const r=Object.keys(t).filter(i=>i!=="instance_id");return r.length>0?r.join(", "):null}function ka(e){const t=(e==null?void 0:e.manifests)??(e==null?void 0:e.manifests_map)??(e==null?void 0:e.manifestsMap)??{};let r=(e==null?void 0:e.active_manifest)??(e==null?void 0:e.activeManifest)??null;r&&typeof r=="object"&&r.label&&(r=r.label);const i=(e==null?void 0:e.validation_status)??(e==null?void 0:e.validationStatus)??[],o=(e==null?void 0:e.validation_results)??(e==null?void 0:e.validationResults)??null,n=(e==null?void 0:e.validation_state)??(e==null?void 0:e.validationState)??null;return{active_manifest:r,manifests:t,validation_status:i,validation_results:o,validation_state:n}}function ca(e=""){const t=e.match(/__(\d+)$/);return t?Number(t[1]):0}function fr(e=""){return/^c2pa\.actions(\.[a-z0-9_]+)?(__\d+)?$/i.test(e)}function pr(e){const t=Array.isArray(e==null?void 0:e.actions)?e.actions:[],r=e==null?void 0:e.templates;if(!r)return t;const i=Array.isArray(r)?r:typeof r=="object"?Object.entries(r).map(([o,n])=>({action:o,...n||{}})):[];return i.length?t.map(o=>{const n=o==null?void 0:o.action;if(!n)return o;const c={};for(const g of i){const x=g==null?void 0:g.action;if(!x||x!=="*"&&x!==n)continue;const T=g.templateParameters||g.parameters;Object.assign(c,g),T&&typeof T=="object"&&(c.parameters={...c.parameters||{},...T})}const s={...c,...o};return s.parameters={...c.parameters||{},...(o==null?void 0:o.parameters)||{}},delete s.templateParameters,s}):t}function Ut(e=[]){if(!Array.isArray(e)||e.length===0)return{actionsLabels:[],actions:[]};const t=e.filter(n=>fr((n==null?void 0:n.label)||"")).sort((n,c)=>ca(n.label)-ca(c.label)),r=[],i=[];for(const n of t){i.push(n.label);const c=(n==null?void 0:n.data)||null,s=pr(c);for(const g of s)r.push(g)}return r.some(n=>n==null?void 0:n.when)&&r.sort((n,c)=>{const s=n!=null&&n.when?Date.parse(n.when):NaN,g=c!=null&&c.when?Date.parse(c.when):NaN;return!Number.isNaN(s)&&!Number.isNaN(g)?s-g:Number.isNaN(s)?Number.isNaN(g)?0:1:-1}),{actionsLabels:i,actions:r}}function ua(e){var c,s;const{actions:t}=Ut((e==null?void 0:e.assertions)||[]);if(!t.length)return!1;const r=t.find(g=>(g==null?void 0:g.action)==="c2pa.created");if(!r)return!1;const i="http://cv.iptc.org/newscodes/digitalsourcetype/",o=r.digitalSourceType||r[i]||((c=r.parameters)==null?void 0:c.digitalSourceType)||((s=r.parameters)==null?void 0:s[i]);if(!o)return!1;const n=String(o);return n.includes("digitalCapture")||n.includes("computationalCapture")}function mr(e){if(!e||typeof e!="string")return null;const t=e.lastIndexOf("c2pa.assertions/");return t===-1?null:e.substring(t+16)}function gr(e){const t=new Map;for(const r of(e==null?void 0:e.ingredients)||[]){const i=r==null?void 0:r.label;i&&t.set(i,r)}return t}function hr(e){var o;const{actions:t}=Ut((e==null?void 0:e.assertions)||[]);if(!t.length)return[];const r=gr(e),i=new Set;for(const n of t){const c=(o=n==null?void 0:n.parameters)==null?void 0:o.ingredients;if(Array.isArray(c))for(const s of c){const g=mr(s==null?void 0:s.url);if(!g)continue;const x=r.get(g)||r.get(g.replace(/__(\d+)$/,"")),T=(x==null?void 0:x.active_manifest)||(x==null?void 0:x.activeManifest)||(x==null?void 0:x.manifest_id)||(x==null?void 0:x.manifestId)||null;T&&i.add(T)}}return[...i]}function va(e){const t=new Set;for(const r of(e==null?void 0:e.ingredients)||[]){const i=(r==null?void 0:r.active_manifest)||(r==null?void 0:r.activeManifest)||(r==null?void 0:r.manifest_id)||(r==null?void 0:r.manifestId)||null;i&&t.add(i)}for(const r of hr(e))t.add(r);return[...t]}function fa(e,t){var i,o;const r=(e==null?void 0:e.validation_results)||(e==null?void 0:e.validationResults);return!r||!t?null:(i=r.manifests)!=null&&i[t]?r.manifests[t]:(o=r.manifestResults)!=null&&o[t]?r.manifestResults[t]:t===e.active_manifest&&r.activeManifest?r.activeManifest:null}function pa(e){const t=(e==null?void 0:e.failure)||[],r=(e==null?void 0:e.success)||[],i=t.some(n=>(n.code||"").startsWith("claimSignature.")||(n.code||"").startsWith("assertion.dataHash.")||(n.code||"").startsWith("assertion.hashedURI."));return r.some(n=>(n.code||"")==="claimSignature.validated")&&!i}function _r(e){var We,Me,Ne;if(!e||!e.manifests)return{hasManifest:!1,hasActions:!1};const t=e.active_manifest,r=(We=e.manifests)==null?void 0:We[t];if(!r)return{hasManifest:!1,hasActions:!1};const i=!0,{actions:o}=Ut(r.assertions||[]),n=o.length>0,c=ua(r);let s=c,g=c?r:null,x=c?t:null;if(!s){const N=va(r),D=new Set([t]);for(;N.length;){const O=N.shift();if(!O||D.has(O))continue;const he=(Me=e.manifests)==null?void 0:Me[O];if(he){if(D.add(O),ua(he)){s=!0,g=he,x=O;break}for(const _e of va(he))_e&&!D.has(_e)&&N.push(_e)}}}const T=N=>{var D,O;return((D=N==null?void 0:N.signature_info)==null?void 0:D.common_name)||((O=N==null?void 0:N.signature_info)==null?void 0:O.issuer)||"Unknown"},X=fa(e,t)||((Ne=e.validation_results)==null?void 0:Ne.activeManifest),M=pa(X),ce=x?fa(e,x):null,E=s?x&&ce?pa(ce):c?M:null:null,Q=!((X==null?void 0:X.failure)||[]).some(N=>(N.code||"")==="signingCredential.untrusted");return{hasManifest:i,hasActions:n,hasCaptureProvenance:s,activeIsCapture:c,activeSigner:T(r),captureSigner:g?T(g):null,activeSignatureValidated:M,signatureValidated:M,signingCredentialTrusted:Q,captureSignatureValidated:E,actions:o}}function xr(e){var g;if(!e)return{};const t=ka(e),r=(g=t.manifests)==null?void 0:g[t.active_manifest];if(!r)return{};const i={c2pa_manifest:e};let o=!1;const{actions:n}=Ut(r.assertions||[]);for(const x of n)if(wa(x)){o=!0;break}i.has_ai=o;const s=(x=>{var T,X;return(X=(T=r.assertions)==null?void 0:T.find(M=>M.label&&M.label.startsWith(x)))==null?void 0:X.data})("stds.exif")||{};return i.exif_data=s,i.camera=s["tiff:Model"]||s["tiff:Make"]||null,i.lens=s["aux:Lens"]||s["exif:LensModel"]||null,i.focal_length=s["exif:FocalLength"]?String(s["exif:FocalLength"]):null,i.aperture=s["exif:FNumber"]?String(s["exif:FNumber"]):null,i.shutter_speed=s["exif:ExposureTime"]?String(s["exif:ExposureTime"]):null,i.iso=s["exif:IsoSpeedRatings"]?Number(s["exif:IsoSpeedRatings"]):null,i.captured_at=s["exif:DateTimeOriginal"]||s["exif:DateTimeDigitized"]||null,i.flash=s["exif:Flash"]?String(s["exif:Flash"]):null,i.white_balance=s["exif:WhiteBalance"]?String(s["exif:WhiteBalance"]):null,i.exposure_mode=s["exif:ExposureMode"]?String(s["exif:ExposureMode"]):null,i.metering_mode=s["exif:MeteringMode"]?String(s["exif:MeteringMode"]):null,i.gps_lat=s["exif:GPSLatitude"]?Number(s["exif:GPSLatitude"]):null,i.gps_lng=s["exif:GPSLongitude"]?Number(s["exif:GPSLongitude"]):null,i.gps_alt=s["exif:GPSAltitude"]?Number(s["exif:GPSAltitude"]):null,i}async function br(){if(Mt)return Mt;try{const r=(await import(`https://cdn.jsdelivr.net/npm/@contentauth/c2pa-web@${da}/+esm`)).createC2pa;return Mt=await r({wasmSrc:`https://cdn.jsdelivr.net/npm/@contentauth/c2pa-web@${da}/dist/resources/c2pa_bg.wasm`}),Mt}catch(e){throw console.error("Failed to load C2PA library",e),new Error("Failed to load C2PA library. Please check your internet connection.")}}function $r(e,t){var r;(r=e.target.files)!=null&&r.length&&t(e.target.files)}var yr=_('<!> <span class="sr-only">Close</span>',1),wr=_('<p class="text-sm font-semibold text-red-500">C2PA checks are disabled for testing.</p>'),kr=_("<!> <!> <!>",1),Pr=(e,t)=>e.key==="Enter"&&t(),Cr=_('<div class="rounded-md bg-destructive/10 p-4 text-sm text-destructive flex items-center gap-2 animate-in fade-in"><!> </div>'),Sr=(e,t,r)=>y(t,a(r),!0),Ar=(e,t,r)=>e.key==="Enter"&&y(t,a(r),!0),Mr=_('<div class="absolute rounded-lg inset-0 flex items-center justify-center bg-background/50 backdrop-blur-sm"><!></div>'),Nr=_('<div class="absolute top-2 right-2"><div class="bg-destructive text-destructive-foreground p-1.5 rounded-full shadow-sm"><!></div></div>'),Dr=_('<div class="bg-green-500 text-white p-1.5 rounded-full shadow-sm"><!></div>'),Ur=_('<div class="bg-emerald-500 text-white p-1.5 rounded-full shadow-sm" title="Capture provenance found and active manifest validates, but capture-manifest validation is unknown in this viewer"><!></div>'),Ir=_('<div class="bg-blue-500 text-white p-1.5 rounded-full shadow-sm" title="Signed by software (no capture-signed provenance found)"><!></div>'),zr=_('<div class="bg-amber-500 text-white p-1.5 rounded-full shadow-sm" title="No verified C2PA signature"><!></div>'),Fr=_('<div class="absolute top-2 right-2"><!></div>'),Tr=_(`<div role="button" tabindex="0"><img class="w-full h-full object-cover"/> <!> <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-3 pt-8
                    opacity-0 group-hover:opacity-100 transition-opacity"><p class="text-white text-xs truncate font-medium"> </p> <p class="text-white/70 text-[10px]"> </p></div></div>`),jr=_('<li class="text-sm text-muted-foreground flex items-start gap-2"><span class="mt-1.5 h-1.5 w-1.5 rounded-full bg-primary/50 shrink-0"></span> <span> </span></li>'),Er=_('<details class="group border rounded-lg bg-card text-card-foreground shadow-sm open:ring-1 open:ring-primary/20"><summary class="flex items-center justify-between p-4 cursor-pointer select-none font-medium hover:bg-muted/50 transition-colors rounded-lg group-open:rounded-b-none"><div class="flex items-center gap-3"><!> </div> <!></summary> <div class="p-4 pt-0 border-t bg-muted/10"><ul class="space-y-2 mt-4"></ul></div></details>'),Rr=_('<div class="p-4 border rounded-lg bg-muted/20 text-sm text-muted-foreground text-center">No specific edit actions found in the manifest.</div>'),Or=_('<div class="mt-8 space-y-4 animate-in fade-in slide-in-from-top-2 bg-muted/30 p-4 rounded-lg"><h3 class="text-lg font-semibold flex items-center gap-2"><!> </h3> <div class="space-y-2"><!> <!></div></div>'),Vr=_('<span class="flex items-center gap-1.5"><!> </span>'),Wr=_('<span class="flex items-center gap-1.5"><!> </span>'),Lr=_('<span class="flex items-center gap-1.5"><!> </span>'),Br=_('<p class="text-xs text-muted-foreground pr-8">“Verified Capture” requires a capture-origin record <em>and</em> validated signatures. <br/>Capture (Unverified) means capture data exists, but this viewer can’t independently verify the capture signature.</p>'),Gr=_("<!> Uploading...",1),Hr=_('<div class="grid grid-cols-2 md:grid-cols-4 gap-4 animate-in fade-in slide-in-from-bottom-4"></div> <!> <div class="flex flex-col-reverse items-stretch gap-4 pt-6 border-t md:flex-row md:items-center md:justify-between"><div class="flex-1 space-y-1.5"><div class="flex gap-4 text-sm font-medium flex-wrap"><span class="flex items-center gap-1.5"><!> </span> <!> <!> <!></div> <!></div> <!></div>',1),qr=_('<div role="button" tabindex="0"><input type="file" accept="image/*" multiple class="hidden"/> <div class="flex flex-col items-center gap-4 text-center p-4"><div class="p-3 rounded-full bg-muted"><!></div> <div class="space-y-1"><p class="text-sm font-medium">Drag & drop or click to upload multiple images</p> <p class="text-xs text-muted-foreground">Supports JPEG, PNG, WebP</p></div></div></div> <!> <!>',1),Jr=_('<div class="absolute top-4 right-4 z-10"><!></div> <div class="overflow-y-auto flex-1 p-1"><!> <!></div>',1),Yr=_('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4"><!></div>');function Kr(e,t){Nt(t,!0);let r=dt(t,"open",15,!1),i=dt(t,"allowAllPhotos",3,!1),o=re(!1),n=re(Bt([])),c=re(null),s=re(null),g=re(null),x=re(!1);const T=l=>!!(l!=null&&l.c2pa),X=l=>{var b;return!!((b=l==null?void 0:l.c2pa)!=null&&b.hasManifest)},M=l=>{var b;return X(l)&&((b=l.c2pa)==null?void 0:b.activeSignatureValidated)===!0},ce=l=>{var b;return((b=l.c2pa)==null?void 0:b.hasCaptureProvenance)===!0},E=l=>{var b;return(b=l.c2pa)==null?void 0:b.captureSignatureValidated},V=l=>M(l)&&ce(l)&&E(l)===!0,Q=l=>M(l)&&ce(l)&&E(l)==null,We=l=>M(l)&&!ce(l),Me=l=>{var b;return!X(l)||((b=l.c2pa)==null?void 0:b.activeSignatureValidated)!==!0},Ne=l=>{var b;return V(l)&&((b=l.c2pa)==null?void 0:b.activeIsCapture)===!1};let N=L(()=>a(n).filter(V).length),D=L(()=>a(n).filter(Q).length),O=L(()=>a(n).filter(We).length),he=L(()=>a(n).filter(Me).length),_e=L(()=>i()?a(n).filter(l=>!l.processing&&!l.error).length:a(N)+a(D));Da(()=>{t.supabase.auth.getSession().then(({data:l})=>{console.log("Current Session:",l.session)})});function Qe(l){return new Promise((b,B)=>{const U=new Image;U.onload=()=>b({width:U.naturalWidth,height:U.naturalHeight}),U.onerror=B,U.src=l})}async function bt(){var I,J;const l=a(_e);if(a(x)||l===0)return;const{data:{session:b}}=await t.supabase.auth.getSession();if(!b){y(s,"You must be logged in to upload photos.");return}y(x,!0),y(s,null);const B=i()?a(n).filter(w=>!w.processing&&!w.error):a(n).filter(w=>V(w)||Q(w));let U=0;for(const w of B)try{w.processing=!0;const{width:Y,height:ue}=await Qe(w.previewUrl),Le=xr((I=w.c2pa)==null?void 0:I.data),tt={width:Y,height:ue,title:w.file.name,description:"Uploaded via Web Interface",c2pa_manifest:(J=w.c2pa)==null?void 0:J.data,c2pa_verified:V(w),...Le},ie=new FormData;ie.append("file",w.file),ie.append("metadata",JSON.stringify(tt));const{data:pt,error:te}=await t.supabase.functions.invoke("photo-upload",{body:ie});if(te)throw te;U++}catch(Y){console.error("Upload failed for",w.file.name,Y),w.error="Upload failed"}finally{w.processing=!1}y(x,!1),U===B.length?(y(n,a(n).filter(w=>!V(w)&&!Q(w)||w.error),!0),a(n).length===0&&(vt(),t.onUploadComplete&&t.onUploadComplete())):y(s,`Successfully uploaded ${U} of ${B.length} images. Check errors.`)}async function ct(l){if(r(!0),!l||l.length===0)return;if(y(s,null),l.length>10){y(s,"Please select 10 or fewer images at a time.");return}const b=new Set(a(n).map(I=>`${I.file.name}|${I.file.size}|${I.file.lastModified}`)),B=Array.from(l).filter(I=>{if(!I.type.startsWith("image/"))return!1;const J=`${I.name}|${I.size}|${I.lastModified}`;return b.has(J)?!1:(b.add(J),!0)});if(l.length>0&&B.length===0){y(s,"All selected images are already in the list or are not valid image types.");return}if(B.length===0)return;const U=B.map(I=>({id:Math.random().toString(36).substring(7),file:I,previewUrl:URL.createObjectURL(I),processing:!0,c2pa:null,error:null}));y(n,[...a(n),...U],!0);for(const I of U)await $t(I)}async function $t(l){var b;try{const U=await(await br()).reader.fromBlob(l.file.type,l.file);let I=null,J={hasManifest:!1};if(U){const Y=await U.manifestStore(),ue=ka(Y);J=_r(ue)||{hasManifest:!1},J.hasManifest&&(I=Y,console.group(`C2PA Analysis: ${l.file.name}`),console.log("Analysis Result:",J),console.log("Manifest Store (Raw):",Y),console.log("Active Manifest ID:",ue.active_manifest),console.log("Active Manifest Data:",(b=ue.manifests)==null?void 0:b[ue.active_manifest]),console.groupEnd())}const w=a(n).findIndex(Y=>Y.id===l.id);w!==-1&&(a(n)[w].c2pa={...J,data:I},a(n)[w].processing=!1)}catch(B){console.error("Error processing image:",B);const U=a(n).findIndex(I=>I.id===l.id);U!==-1&&(a(n)[U].error="Failed to process",a(n)[U].processing=!1)}}function yt(l){var b;l.preventDefault(),l.stopPropagation(),y(o,!1),(b=l.dataTransfer.files)!=null&&b.length&&ct(l.dataTransfer.files)}function It(l){l.preventDefault(),y(o,!0)}function ut(){y(o,!1)}function Ze(){var l;(l=a(c))==null||l.click()}function vt(){r(!1)}var et=q(),ft=A(et);{var wt=l=>{var b=Yr(),B=f(b);xa(B,{class:"w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col relative shadow-xl",children:(U,I)=>{var J=Jr(),w=A(J),Y=f(w);Oe(Y,{variant:"ghost",size:"icon",class:"h-8 w-8 rounded-full",onclick:vt,children:(ie,pt)=>{var te=yr(),G=A(te);Xa(G,{class:"h-4 w-4"}),ee(2),v(ie,te)},$$slots:{default:!0}}),u(w);var ue=m(w,2),Le=f(ue);qa(Le,{children:(ie,pt)=>{var te=kr(),G=A(te);Ja(G,{children:(ve,ye)=>{ee();var He=Se("Add Photos");v(ve,He)},$$slots:{default:!0}});var De=m(G,2);Ya(De,{class:"mb-3",children:(ve,ye)=>{ee();var He=Se("Upload images to verify their C2PA metadata locally in your browser.");v(ve,He)},$$slots:{default:!0}});var Be=m(De,2);{var Ge=ve=>{var ye=wr();v(ve,ye)};k(Be,ve=>{i()&&ve(Ge)})}v(ie,te)},$$slots:{default:!0}});var tt=m(Le,2);Ha(tt,{class:"space-y-6",children:(ie,pt)=>{var te=qr(),G=A(te);G.__click=Ze,G.__keydown=[Pr,Ze];var De=f(G);De.__change=[$r,ct],ga(De,fe=>y(c,fe),()=>a(c));var Be=m(De,2),Ge=f(Be),ve=f(Ge);qt(ve,{class:"h-6 w-6 text-muted-foreground"}),u(Ge),ee(2),u(Be),u(G);var ye=m(G,2);{var He=fe=>{var we=Cr(),Ue=f(we);aa(Ue,{class:"h-4 w-4"});var at=m(Ue);u(we),F(()=>W(at,` ${a(s)??""}`)),v(fe,we)};k(ye,fe=>{a(s)&&fe(He)})}var kt=m(ye,2);{var zt=fe=>{var we=Hr(),Ue=A(we);_t(Ue,21,()=>a(n),P=>P.id,(P,h)=>{var z=Tr();z.__click=[Sr,g,h],z.__keydown=[Ar,g,h];var Z=f(z),ze=m(Z,2);{var mt=R=>{var H=Mr(),Je=f(H);ra(Je,{class:"h-8 w-8 animate-spin text-primary"}),u(H),v(R,H)},nt=(R,H)=>{{var Je=Fe=>{var Ye=Nr(),Te=f(Ye),je=f(Te);aa(je,{class:"h-5 w-5"}),u(Te),u(Ye),F(()=>Ae(Te,"title",a(h).error)),v(Fe,Ye)},Pt=(Fe,Ye)=>{{var Te=je=>{var Ke=Fr(),st=f(Ke);{var gt=Ee=>{var Re=Dr(),Ft=f(Re);At(Ft,{class:"h-5 w-5"}),u(Re),F(Tt=>Ae(Re,"title",Tt),[()=>Ne(a(h))?"Verified (edited, but traceable to capture-signed origin)":"Verified Capture (device/camera signed)"]),v(Ee,Re)},Ct=(Ee,Re)=>{{var Ft=ot=>{var ht=Ur(),jt=f(ht);At(jt,{class:"h-5 w-5"}),u(ht),v(ot,ht)},Tt=(ot,ht)=>{{var jt=lt=>{var Xe=Ir(),Et=f(Xe);ia(Et,{class:"h-5 w-5"}),u(Xe),v(lt,Xe)},Pa=lt=>{var Xe=zr(),Et=f(Xe);ta(Et,{class:"h-5 w-5"}),u(Xe),v(lt,Xe)};k(ot,lt=>{We(a(h))?lt(jt):lt(Pa,!1)},ht)}};k(Ee,ot=>{Q(a(h))?ot(Ft):ot(Tt,!1)},Re)}};k(st,Ee=>{V(a(h))?Ee(gt):Ee(Ct,!1)})}u(Ke),v(je,Ke)};k(Fe,je=>{T(a(h))&&je(Te)},Ye)}};k(R,Fe=>{a(h).error?Fe(Je):Fe(Pt,!1)},H)}};k(ze,R=>{a(h).processing?R(mt):R(nt,!1)})}var qe=m(ze,2),de=f(qe),Ce=f(de,!0);u(de);var K=m(de,2),ae=f(K);u(K),u(qe),u(z),F(R=>{var H;Ht(z,1,`relative aspect-square rounded-lg overflow-hidden border bg-muted/30 group cursor-pointer transition-all
                  ${((H=a(g))==null?void 0:H.id)===a(h).id?"ring-2 ring-primary ring-offset-2":"hover:border-primary/50"}`),Ae(Z,"src",a(h).previewUrl),Ae(Z,"alt",a(h).file.name),W(Ce,a(h).file.name),W(ae,`${R??""} KB`)},[()=>(a(h).file.size/1024).toFixed(0)]),v(P,z)}),u(Ue);var at=m(Ue,2);{var d=P=>{var h=Or();const z=L(()=>(()=>{const K={};for(const ae of a(g).c2pa.actions||[]){let R;wa(ae)?R={order:0,label:"AI Edits",icon:$a}:R=ur(ae.action);const H=R.label;K[H]||(K[H]={category:R,actions:[]}),K[H].actions.push(ae)}return Object.values(K).sort((ae,R)=>ae.category.order-R.category.order)})());var Z=f(h),ze=f(Z);ir(ze,{class:"h-5 w-5"});var mt=m(ze);u(Z);var nt=m(Z,2),qe=f(nt);_t(qe,17,()=>a(z),Gt,(K,ae)=>{var R=Er(),H=f(R),Je=f(H),Pt=f(Je);ba(Pt,()=>a(ae).category.icon,(Ke,st)=>{st(Ke,{class:"h-5 w-5 text-primary"})});var Fe=m(Pt);u(Je);var Ye=m(Je,2);rr(Ye,{class:"h-4 w-4 text-muted-foreground transition-transform duration-200 group-open:rotate-180"}),u(H);var Te=m(H,2),je=f(Te);_t(je,21,()=>a(ae).actions,Gt,(Ke,st)=>{var gt=jr(),Ct=m(f(gt),2),Ee=f(Ct,!0);u(Ct),u(gt),F(Re=>W(Ee,Re),[()=>vr(a(st))||a(st).action]),v(Ke,gt)}),u(je),u(Te),u(R),F(()=>W(Fe,` ${a(ae).category.label??""}`)),v(K,R)});var de=m(qe,2);{var Ce=K=>{var ae=Rr();v(K,ae)};k(de,K=>{a(z).length===0&&K(Ce)})}u(nt),u(h),F(()=>W(mt,` Edits for ${a(g).file.name??""}`)),v(P,h)};k(at,P=>{var h;a(g)&&((h=a(g).c2pa)!=null&&h.hasManifest)&&P(d)})}var p=m(at,2),$=f(p),C=f($),S=f(C),j=f(S);At(j,{class:"h-4 w-4 text-green-500"});var pe=m(j);u(S);var ne=m(S,2);{var rt=P=>{var h=Vr(),z=f(h);At(z,{class:"h-4 w-4 text-emerald-500"});var Z=m(z);u(h),F(()=>W(Z,` ${a(D)??""} Capture (Unverified)`)),v(P,h)};k(ne,P=>{a(D)>0&&P(rt)})}var se=m(ne,2);{var Ie=P=>{var h=Wr(),z=f(h);ia(z,{class:"h-4 w-4 text-blue-500"});var Z=m(z);u(h),F(()=>W(Z,` ${a(O)??""} Signed by Software`)),v(P,h)};k(se,P=>{a(O)>0&&P(Ie)})}var it=m(se,2);{var ke=P=>{var h=Lr(),z=f(h);ta(z,{class:"h-4 w-4 text-amber-500"});var Z=m(z);u(h),F(()=>W(Z,` ${a(he)??""} Unsigned / Not Verified`)),v(P,h)};k(it,P=>{a(he)>0&&P(ke)})}u(C);var oe=m(C,2);{var le=P=>{var h=Br();v(P,h)};k(oe,P=>{(a(he)>0||a(O)>0||a(D)>0)&&P(le)})}u($);var me=m($,2);{var Pe=P=>{const h=L(()=>a(_e));Oe(P,{onclick:bt,get disabled(){return a(x)},class:"w-full md:w-auto",children:(z,Z)=>{var ze=q(),mt=A(ze);{var nt=de=>{var Ce=Gr(),K=A(Ce);ra(K,{class:"mr-2 h-4 w-4 animate-spin"}),ee(),v(de,Ce)},qe=de=>{var Ce=Se();F(()=>W(Ce,`Upload ${a(h)??""} ${a(h)===1?"Image":"Images"}`)),v(de,Ce)};k(mt,de=>{a(x)?de(nt):de(qe,!1)})}v(z,ze)},$$slots:{default:!0}})};k(me,P=>{a(_e)>0&&P(Pe)})}u(p),F(()=>W(pe,` ${a(N)??""} Verified Capture`)),v(fe,we)};k(kt,fe=>{a(n).length>0&&fe(zt)})}F(()=>Ht(G,1,`relative flex flex-col items-center justify-center w-full h-48 rounded-xl border-2 border-dashed transition-colors cursor-pointer outline-none
            ${a(o)?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50 hover:bg-muted/50"}`)),Ve("dragover",G,It),Ve("dragleave",G,ut),Ve("drop",G,yt),v(ie,te)},$$slots:{default:!0}}),u(ue),v(U,J)},$$slots:{default:!0}}),u(b),v(l,b)};k(ft,l=>{r()&&l(wt)})}return v(e,et),Dt({processFiles:ct})}_a(["click","keydown","change"]);var Xr=_('<div class="fixed inset-0 z-[1000] flex items-center justify-center bg-background/20 backdrop-blur-sm pointer-events-none svelte-19x1v7i"><div class="bg-background/40 backdrop-blur-xl border-2 border-dashed border-primary/50 p-12 rounded-3xl shadow-2xl flex flex-col items-center gap-4 animate-in zoom-in-95 duration-200 ring-1 ring-white/10 svelte-19x1v7i"><div class="p-5 rounded-full bg-primary/10 shadow-inner svelte-19x1v7i"><!></div> <div class="space-y-1 text-center svelte-19x1v7i"><p class="text-3xl font-bold text-primary tracking-tight svelte-19x1v7i">Drop to Add Photos</p> <p class="text-muted-foreground font-medium svelte-19x1v7i">Import and verify your images instantly</p></div></div></div>'),Qr=_("<!> <!>",1),Zr=_('<span class="absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-primary text-primary-foreground text-xs px-2 py-1 rounded-md whitespace-nowrap z-50 animate-in fade-in zoom-in-95 duration-200 shadow-md svelte-19x1v7i">Copied to clipboard</span>'),ei=_('<div class="my-3 flex items-center justify-end svelte-19x1v7i"><!></div>'),ti=_("<!> Add Photos",1),ai=_('<div class="flex flex-col items-center justify-center py-16 text-center border-2 border-dashed rounded-lg border-muted mt-4 svelte-19x1v7i"><div class="bg-muted/30 p-4 rounded-full mb-4 svelte-19x1v7i"><!></div> <h3 class="text-xl font-semibold tracking-tight svelte-19x1v7i">Upload your first photo</h3> <p class="text-muted-foreground max-w-sm mt-2 mb-6 text-sm svelte-19x1v7i">Your gallery is empty. Upload a photo to get started with C2PA verification.</p> <!></div>'),ri=_('<div class="flex flex-col items-center justify-center py-16 text-center border-2 border-dashed rounded-lg border-muted mt-4 svelte-19x1v7i"><p class="text-muted-foreground svelte-19x1v7i">No photos yet.</p></div>'),ii=(e,t,r,i)=>{a(t)&&(e.preventDefault(),r(a(i).id))},ni=(e,t,r)=>{e.preventDefault(),e.stopPropagation(),t(a(r).id)},si=_('<button type="button"><!></button>'),oi=_('<!> <!> <img class="h-full w-full object-cover rounded-sm transition-opacity duration-300 svelte-19x1v7i"/>',1),li=_('<a class="group svelte-19x1v7i"><!></a>'),di=_('<span class="flex items-center svelte-19x1v7i"><!> <span class="max-w-0 overflow-hidden whitespace-nowrap transition-all duration-300 ease-out group-hover:max-w-[6rem] init-expand-text svelte-19x1v7i">Add Images</span></span> <span class="sr-only svelte-19x1v7i">Add Images</span>',1),ci=_('<div class="fixed bottom-0 left-0 right-0 z-[999] border-t bg-background/95 backdrop-blur-sm svelte-19x1v7i"><div class="container mx-auto max-w-screen-lg px-4 py-3 svelte-19x1v7i"><div class="flex gap-3 svelte-19x1v7i"><!> <!></div></div></div>'),ui=_('<!> <div class="bg-background text-foreground min-h-screen svelte-19x1v7i"><div class="relative svelte-19x1v7i"><main class="relative z-10 container mx-auto max-w-screen-lg px-4 sm:pt-20 pt-8 pb-8 svelte-19x1v7i"><div class="relative z-10 mb-8 svelte-19x1v7i"><div class="flex flex-row items-start gap-4 svelte-19x1v7i"><!> <div class="flex-grow min-w-0 svelte-19x1v7i"><h1 class="text-xl font-bold tracking-tight leading-tight sm:text-3xl svelte-19x1v7i"> </h1> <button class="text-muted-foreground text-sm sm:text-base hover:text-foreground transition-colors relative cursor-pointer svelte-19x1v7i" type="button" title="Click to copy username"> <!></button> <p class="mt-2 max-w-xl text-balance text-sm sm:text-base svelte-19x1v7i"> </p> <div class="mt-3 flex flex-wrap gap-2 svelte-19x1v7i"></div></div></div> <div class="mt-4 flex gap-2 md:absolute md:top-0 md:right-0 md:mt-0 svelte-19x1v7i"><!> <!></div></div> <!> <!> <!> <div class="grid grid-cols-2 gap-2 sm:grid-cols-3 md:gap-4 svelte-19x1v7i"></div></main></div> <!></div> <!> <!>',1);function Oi(e,t){Nt(t,!0);let r=re(!1),i=re(null),o=re(!1),n=0;function c(d){var p,$,C;d.preventDefault(),y(o,!1),n=0,($=(p=d.dataTransfer)==null?void 0:p.files)!=null&&$.length&&((C=a(i))==null||C.processFiles(d.dataTransfer.files))}function s(d){d.preventDefault()}function g(d){var p,$;d.preventDefault(),n++,(($=(p=d.dataTransfer)==null?void 0:p.items)==null?void 0:$.length)>0&&y(o,!0)}function x(d){d.preventDefault(),n--,n===0&&y(o,!1)}function T(d){d&&typeof d.preventDefault=="function"&&d.preventDefault(),console.log("Add Photos clicked, opening dialog..."),y(r,!0)}function X(){Qt()}let M=L(()=>t.data.profile),ce=L(()=>t.data.photos),E=L(()=>t.data.canEdit),V=L(()=>a(M).interests.map(d=>d.interest)),Q=Bt({});function We(d){if(d.storage_key){const{data:p}=t.data.supabase.storage.from("photos").getPublicUrl(d.storage_key);return p.publicUrl}return d.storage_url}let Me=re(!1),Ne,N=re(!1),D=re(Bt([])),O=re(!1);function he(){navigator.clipboard.writeText(`@${a(M).username}`),y(Me,!0),Ne&&clearTimeout(Ne),Ne=setTimeout(()=>{y(Me,!1)},2e3)}function _e(){y(N,!a(N)),a(N)||y(D,[],!0)}function Qe(d){return a(D).includes(d)}function bt(d){if(Qe(d)){y(D,a(D).filter(p=>p!==d),!0);return}y(D,[...a(D),d],!0)}async function ct(){var p;if(!(a(D).length===0||a(O)||!confirm(`Delete ${a(D).length} selected photo${a(D).length>1?"s":""}?`))){y(O,!0);try{const $=new FormData;$.set("photo_ids",a(D).join(","));const S=await(await fetch("?/deletePhotos",{method:"POST",body:$})).json();(S==null?void 0:S.type)==="success"?(Wt.success("Photos deleted."),y(D,[],!0),y(N,!1),await Qt()):Wt.error(((p=S==null?void 0:S.data)==null?void 0:p.error)||"Failed to delete photos.")}catch($){console.error("Delete request failed",$),Wt.error("Failed to delete photos.")}finally{y(O,!1)}}}var $t=ui();Ve("drop",St,c),Ve("dragover",St,s),Ve("dragenter",St,g),Ve("dragleave",St,x);var yt=A($t);{var It=d=>{var p=Xr(),$=f(p),C=f($),S=f(C);qt(S,{class:"h-12 w-12 text-primary animate-pulse"}),u(C),ee(2),u($),u(p),v(d,p)};k(yt,d=>{a(o)&&!a(r)&&d(It)})}var ut=m(yt,2),Ze=f(ut),vt=f(Ze),et=f(vt),ft=f(et),wt=f(ft);za(wt,{class:"h-20 w-20 shrink-0 md:h-32 md:w-32",children:(d,p)=>{var $=Qr(),C=A($);Fa(C,{get src(){return a(M).avatar_url},get alt(){return a(M).display_name}});var S=m(C,2);Ta(S,{children:(j,pe)=>{Qa(j,{class:"h-12 w-12"})},$$slots:{default:!0}}),v(d,$)},$$slots:{default:!0}});var l=m(wt,2),b=f(l),B=f(b,!0);u(b);var U=m(b,2);U.__click=he;var I=f(U),J=m(I);{var w=d=>{var p=Zr();v(d,p)};k(J,d=>{a(Me)&&d(w)})}u(U);var Y=m(U,2),ue=f(Y,!0);u(Y);var Le=m(Y,2);_t(Le,21,()=>a(V),Gt,(d,p)=>{ja(d,{variant:"secondary",children:($,C)=>{ee();var S=Se();F(()=>W(S,a(p))),v($,S)},$$slots:{default:!0}})}),u(Le),u(l),u(ft);var tt=m(ft,2),ie=f(tt);const pt=L(()=>a(M).display_name||a(M).username),te=L(()=>a(M).bio||`Check out ${a(M).display_name}'s profile on Proof in Bio`);Wa(ie,{get title(){return a(pt)},get description(){return a(te)},label:"Share Profile",class:"flex-1 md:flex-none"});var G=m(ie,2);{var De=d=>{Oe(d,{get href(){return`/${t.data.profile.username??""}/edit`},class:"flex-1 md:flex-none",children:(p,$)=>{ee();var C=Se("Edit Profile");v(p,C)},$$slots:{default:!0}})};k(G,d=>{a(E)&&d(De)})}u(tt),u(et);var Be=m(et,2);dr(Be);var Ge=m(Be,2);{var ve=d=>{var p=ei(),$=f(p);Oe($,{variant:"ghost",size:"sm",onclick:_e,children:(C,S)=>{ee();var j=Se();F(()=>W(j,a(N)?"Done Editing":"Edit Images")),v(C,j)},$$slots:{default:!0}}),u(p),v(d,p)};k(Ge,d=>{a(E)&&d(ve)})}var ye=m(Ge,2);{var He=d=>{var p=q(),$=A(p);{var C=j=>{var pe=ai(),ne=f(pe),rt=f(ne);qt(rt,{class:"h-10 w-10 text-muted-foreground/60"}),u(ne);var se=m(ne,6);Oe(se,{onclick:T,variant:"outline",children:(Ie,it)=>{var ke=ti(),oe=A(ke);oa(oe,{class:"mr-2 h-4 w-4"}),ee(),v(Ie,ke)},$$slots:{default:!0}}),u(pe),v(j,pe)},S=j=>{var pe=ri();v(j,pe)};k($,j=>{a(E)?j(C):j(S,!1)})}v(d,p)};k(ye,d=>{a(ce).length===0&&d(He)})}var kt=m(ye,2);_t(kt,23,()=>a(ce),d=>d.id,(d,p)=>{var $=li();$.__click=[ii,N,bt,p];var C=f($);const S=L(()=>`overflow-hidden border-0 transition-all rounded-sm py-0 duration-200 ease-in-out ${a(N)?"ring-2 ring-transparent":""} ${Qe(a(p).id)?"ring-2 ring-primary":""} group-hover:shadow-lg group-hover:-translate-y-1`);xa(C,{get class(){return a(S)},children:(j,pe)=>{or(j,{ratio:1,class:"bg-slate-100 dark:bg-slate-800 rounded-sm relative",children:(ne,rt)=>{var se=oi(),Ie=A(se);{var it=me=>{La(me,{class:"h-full w-full absolute"})};k(Ie,me=>{Q[a(p).id]||me(it)})}var ke=m(Ie,2);{var oe=me=>{var Pe=si();Pe.__click=[ni,bt,p];var P=f(Pe);Ba(P,{class:"h-3 w-3"}),u(Pe),F((h,z)=>{Ht(Pe,1,h,"svelte-19x1v7i"),Ae(Pe,"aria-pressed",z),Ae(Pe,"aria-label",`Select photo ${a(p).title||a(p).id}`)},[()=>`absolute top-2 right-2 z-10 flex h-6 w-6 items-center justify-center rounded-full border-2 ${Qe(a(p).id)?"border-primary bg-primary text-primary-foreground":"border-white/90 bg-background/80 text-transparent"} shadow-sm backdrop-blur`,()=>Qe(a(p).id)]),v(me,Pe)};k(ke,me=>{a(N)&&me(oe)})}var le=m(ke,2);F(me=>{Ae(le,"src",me),Ae(le,"alt",a(p).title||"User photo"),ha(le,`opacity: ${Q[a(p).id]?1:0};`)},[()=>We(a(p))]),Ve("load",le,()=>Q[a(p).id]=!0),Ia(le),v(ne,se)},$$slots:{default:!0}})},$$slots:{default:!0}}),u($),F(()=>Ae($,"href",`/${a(M).username}/${a(p).id}`)),v(d,$)}),u(kt),u(vt),u(Ze);var zt=m(Ze,2);{var fe=d=>{Oe(d,{style:"z-index: 999",class:"group fixed bottom-6 right-6 h-14 min-w-[3.5rem] rounded-full shadow-2xl transition-all duration-300 ease-out hover:pr-6 hover:pl-4 flex items-center justify-center overflow-hidden init-expand-btn",onclick:T,children:(p,$)=>{var C=di(),S=A(C),j=f(S);oa(j,{class:"h-10 w-10 transition-[margin] duration-300 ease-out group-hover:mr-2 init-expand-icon"}),ee(2),u(S),ee(2),v(p,C)},$$slots:{default:!0}})};k(zt,d=>{a(E)&&!a(N)&&d(fe)})}u(ut);var we=m(ut,2);{var Ue=d=>{var p=ci(),$=f(p),C=f($),S=f(C);Oe(S,{variant:"ghost",class:"w-1/3",onclick:_e,children:(ne,rt)=>{ee();var se=Se("Cancel");v(ne,se)},$$slots:{default:!0}});var j=m(S,2);const pe=L(()=>a(D).length===0||a(O));Oe(j,{variant:"destructive",class:"w-2/3 !bg-red-500 hover:!bg-red-600",get disabled(){return a(pe)},onclick:ct,children:(ne,rt)=>{var se=q(),Ie=A(se);{var it=oe=>{var le=Se("Deleting...");v(oe,le)},ke=oe=>{var le=Se();F(()=>W(le,`Delete ${a(D).length>0?`(${a(D).length})`:""}`)),v(oe,le)};k(Ie,oe=>{a(O)?oe(it):oe(ke,!1)})}v(ne,se)},$$slots:{default:!0}}),u(C),u($),u(p),v(d,p)};k(we,d=>{a(E)&&a(N)&&d(Ue)})}var at=m(we,2);ga(Kr(at,{get supabase(){return t.data.supabase},get allowAllPhotos(){return t.data.allowAllPhotos},onUploadComplete:X,get open(){return a(r)},set open(d){y(r,d,!0)}}),d=>y(i,d,!0),()=>a(i)),F(()=>{W(B,a(M).display_name||a(M).username),W(I,`@${a(M).username??""} `),W(ue,a(M).bio)}),v(e,$t),Dt()}_a(["click"]);export{Oi as component};
