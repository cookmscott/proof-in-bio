import"../chunks/CWj6FrbW.js";import{c as W,f as x,a as t,p as fe,b as d,d as me,t as H,s,e as l,j as C,i as a,u as K,r as n,h as L,g as v,k as N}from"../chunks/C2C4OSbN.js";import{s as V}from"../chunks/CaX8zT8B.js";import{l as pe,s as _e,i as j,b as ge}from"../chunks/DMomQ0_j.js";import{d as he}from"../chunks/DokP9ubG.js";import{B as Q}from"../chunks/TSTVjuax.js";import{C as xe}from"../chunks/BgpECmlh.js";import{C as $e}from"../chunks/DE5p0xUg.js";import{C as we,a as be,b as ye}from"../chunks/C6e9y6Ea.js";import{U as Ce}from"../chunks/BuLJfycD.js";import{L as Pe}from"../chunks/BI3CT5mP.js";import"../chunks/BmSKAjrN.js";import{I as Fe,s as ke}from"../chunks/DHZx8vpx.js";import{C as te}from"../chunks/B0mtjVV3.js";import{F as Ue}from"../chunks/DXIZxz3_.js";function Ae(P,p){const F=pe(p,["children","$$slots","$$events","$$legacy"]),w=[["path",{d:"M12 19h8"}],["path",{d:"m4 17 6-6-6-6"}]];Fe(P,_e({name:"terminal"},()=>F,{get iconNode(){return w},children:(u,f)=>{var _=W(),m=x(_);ke(m,p,"default",{}),t(u,_)},$$slots:{default:!0}}))}function Ie(P,p,F,w){var f;const u=(f=P.target.files)==null?void 0:f[0];u&&(v(p,u,!0),v(F,null),v(w,null))}var Re=d("<!> <!>",1),Se=d("<!> ",1),Le=d('<span class="text-sm text-muted-foreground flex items-center gap-2"><!> </span>'),Ne=d("<!> Verifying...",1),Ve=d("<!> Upload & Verify",1),je=d('<div class="rounded-md bg-muted p-4 overflow-x-auto"><h3 class="text-sm font-semibold mb-2">C2PA Metadata Result:</h3> <pre class="text-xs font-mono"> </pre></div>'),Be=d('<div class="rounded-md bg-destructive/10 p-4 text-sm text-destructive flex items-center gap-2"><!> </div>'),Ee=d('<div class="flex flex-col gap-6"><p class="text-sm text-muted-foreground">You are logged in as <span class="font-medium text-foreground"> </span>.</p> <div class="grid gap-2"><input type="file" accept="image/*" class="hidden"/> <div class="flex items-center gap-4"><!> <!></div></div> <!> <!> <!></div>'),Me=d('<div class="flex flex-col items-center justify-center gap-4 py-8 text-center"><div class="rounded-full bg-muted p-3"><!></div> <div class="space-y-1"><h3 class="font-semibold">Authentication Required</h3> <p class="text-sm text-muted-foreground max-w-xs mx-auto">You must be logged in to access this function.</p></div> <!></div>'),Te=d("<!> <!>",1),Ye=d('<div class="container mx-auto max-w-2xl py-12 px-4"><!></div>');function ra(P,p){fe(p,!0);let F=K(()=>p.data.supabase),w=K(()=>p.data.session),u=L(!1),f=L(null),_=L(null),m=L(null),q=L(null);async function re(){if(a(m)){v(u,!0),v(f,null),v(_,null);try{const b=await new Promise((B,D)=>{const g=new FileReader;g.onloadend=()=>B(g.result),g.onerror=D,g.readAsDataURL(a(m))}),{data:X,error:k}=await a(F).functions.invoke("hello-world",{body:{dataUrl:b}});if(k)throw k;v(f,X,!0)}catch(b){console.error("Function call failed:",b),v(_,b.message||"Failed to call function",!0)}finally{v(u,!1)}}}var z=Ye(),se=l(z);xe(se,{children:(b,X)=>{var k=Te(),B=x(k);we(B,{children:(g,oe)=>{var U=Re(),E=x(U);be(E,{children:(A,h)=>{C();var i=H("C2PA Verification Test");t(A,i)},$$slots:{default:!0}});var J=s(E,2);ye(J,{children:(A,h)=>{C();var i=H("Upload an image to verify its C2PA metadata via Edge Function.");t(A,i)},$$slots:{default:!0}}),t(g,U)},$$slots:{default:!0}});var D=s(B,2);$e(D,{class:"space-y-6",children:(g,oe)=>{var U=W(),E=x(U);{var J=h=>{var i=Ee(),$=l(i),M=s(l($)),O=l(M,!0);n(M),C(),n($);var I=s($,2),T=l(I);T.__change=[Ie,m,f,_],ge(T,e=>v(q,e),()=>a(q));var Y=s(T,2),Z=l(Y);Q(Z,{variant:"outline",onclick:()=>{var e;return(e=a(q))==null?void 0:e.click()},class:"w-full sm:w-auto",children:(e,o)=>{var r=Se(),c=x(r);Ce(c,{class:"mr-2 h-4 w-4"});var R=s(c);N(()=>V(R,` ${a(m)?"Change File":"Select Image"}`)),t(e,r)},$$slots:{default:!0}});var le=s(Z,2);{var ne=e=>{var o=Le(),r=l(o);Ue(r,{class:"h-4 w-4"});var c=s(r);n(o),N(()=>V(c,` ${a(m).name??""}`)),t(e,o)};j(le,e=>{a(m)&&e(ne)})}n(Y),n(I);var ee=s(I,2);const ie=K(()=>a(u)||!a(m));Q(ee,{onclick:re,get disabled(){return a(ie)},class:"w-full sm:w-auto",children:(e,o)=>{var r=W(),c=x(r);{var R=y=>{var S=Ne(),G=x(S);Pe(G,{class:"mr-2 h-4 w-4 animate-spin"}),C(),t(y,S)},ue=y=>{var S=Ve(),G=x(S);Ae(G,{class:"mr-2 h-4 w-4"}),C(),t(y,S)};j(c,y=>{a(u)?y(R):y(ue,!1)})}t(e,r)},$$slots:{default:!0}});var ae=s(ee,2);{var de=e=>{var o=je(),r=s(l(o),2),c=l(r,!0);n(r),n(o),N(R=>V(c,R),[()=>JSON.stringify(a(f),null,2)]),t(e,o)};j(ae,e=>{a(f)&&e(de)})}var ce=s(ae,2);{var ve=e=>{var o=Be(),r=l(o);te(r,{class:"h-4 w-4"});var c=s(r);n(o),N(()=>V(c,` ${a(_)??""}`)),t(e,o)};j(ce,e=>{a(_)&&e(ve)})}n(i),N(()=>V(O,a(w).user.email)),t(h,i)},A=h=>{var i=Me(),$=l(i),M=l($);te(M,{class:"h-6 w-6 text-muted-foreground"}),n($);var O=s($,4);Q(O,{href:"/auth",variant:"outline",children:(I,T)=>{C();var Y=H("Sign In");t(I,Y)},$$slots:{default:!0}}),n(i),t(h,i)};j(E,h=>{a(w)?h(J):h(A,!1)})}t(g,U)},$$slots:{default:!0}}),t(b,k)},$$slots:{default:!0}}),n(z),t(P,z),me()}he(["change"]);export{ra as component};
